import{j as e}from"./vendor-query-D5ml2kdZ.js";import{r as t,L as d}from"./vendor-react-C8VcOkCS.js";import{b as r,C as l}from"./index-BZEM9EbM.js";import{B as o}from"./Badge-8fS5vckW.js";import{L as A,Q as m,u as x,S as h,D as u,g as C,z as P,W as L,a_ as _,G as k}from"./vendor-ui-tJ0aMxU9.js";function B(){const[g,p]=t.useState(!0),[i,j]=t.useState({}),[f,N]=t.useState(0),[n,b]=t.useState([]),[c,v]=t.useState(null),[w,y]=t.useState(!1);t.useEffect(()=>{(async()=>{const s=await Promise.allSettled([r.get("/admin/analytics"),r.get("/admin/agencies?per_page=5"),r.get("/admin/settings/system-health")]);if(s[0].status==="fulfilled"){const a=s[0].value;j(a)}if(s[1].status==="fulfilled"){const a=s[1].value;N(a.total??0),b(a.data??[])}s[2].status==="fulfilled"?v(s[2].value):y(!0),p(!1)})()},[]);const S=[{label:"Platform Settings",desc:"Configure platform-wide settings",href:"/admin/platform-settings",icon:e.jsx(C,{className:"w-5 h-5"})},{label:"User Management",desc:"Manage users and permissions",href:"/admin/users",icon:e.jsx(x,{className:"w-5 h-5"})},{label:"Agency Directory",desc:"Browse and manage agencies",href:"/admin/agencies",icon:e.jsx(m,{className:"w-5 h-5"})},{label:"Subscription Plans",desc:"Manage pricing and plans",href:"/admin/plans",icon:e.jsx(u,{className:"w-5 h-5"})},{label:"Product Catalog",desc:"Insurance products and lines",href:"/admin/products",icon:e.jsx(h,{className:"w-5 h-5"})},{label:"Analytics",desc:"Platform-wide metrics",href:"/admin/analytics",icon:e.jsx(P,{className:"w-5 h-5"})},{label:"Audit Logs",desc:"Track platform activity",href:"/admin/audit-log",icon:e.jsx(L,{className:"w-5 h-5"})},{label:"System Health",desc:"Monitor services and uptime",href:"/admin/platform-settings",icon:e.jsx(_,{className:"w-5 h-5"})},{label:"Reports",desc:"Generate and export reports",href:"/reports",icon:e.jsx(k,{className:"w-5 h-5"})}];return g?e.jsxs("div",{className:"space-y-6",children:[e.jsxs("div",{children:[e.jsx("h1",{className:"text-2xl font-bold text-slate-900",children:"Platform Overview"}),e.jsx("p",{className:"text-slate-500 mt-1",children:"SuperAdmin Dashboard"})]}),e.jsxs(l,{className:"p-12 text-center",children:[e.jsx(A,{className:"w-8 h-8 animate-spin text-shield-500 mx-auto"}),e.jsx("p",{className:"text-slate-500 mt-2",children:"Loading platform data..."})]})]}):e.jsxs("div",{className:"space-y-6",children:[e.jsxs("div",{children:[e.jsx("h1",{className:"text-2xl font-bold text-slate-900",children:"Platform Overview"}),e.jsx("p",{className:"text-slate-500 mt-1",children:"SuperAdmin Dashboard"})]}),e.jsx("div",{className:"grid grid-cols-2 lg:grid-cols-4 gap-4",children:[{label:"Total Agencies",value:f,icon:e.jsx(m,{className:"w-6 h-6"})},{label:"Active Users",value:i.active_users??i.total_users??0,icon:e.jsx(x,{className:"w-6 h-6"})},{label:"Total Policies",value:i.total_policies??0,icon:e.jsx(h,{className:"w-6 h-6"})},{label:"Platform MRR",value:`$${Number(i.platform_revenue??0).toLocaleString()}`,icon:e.jsx(u,{className:"w-6 h-6"})}].map(s=>e.jsx(l,{className:"p-6",children:e.jsxs("div",{className:"flex items-center gap-4",children:[e.jsx("div",{className:"w-12 h-12 rounded-xl bg-shield-50 flex items-center justify-center text-shield-600",children:s.icon}),e.jsxs("div",{children:[e.jsx("p",{className:"text-sm text-slate-500",children:s.label}),e.jsx("p",{className:"text-2xl font-bold text-slate-900",children:s.value})]})]})},s.label))}),e.jsxs("div",{children:[e.jsx("h2",{className:"text-lg font-semibold text-slate-900 mb-3",children:"Quick Actions"}),e.jsx("div",{className:"grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-3 gap-4",children:S.map(s=>e.jsx(d,{to:s.href,className:"block",children:e.jsx(l,{className:"p-5 hover:shadow-md transition-shadow cursor-pointer group",children:e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx("div",{className:"w-10 h-10 rounded-lg bg-shield-50 text-shield-600 flex items-center justify-center group-hover:bg-shield-100 transition-colors",children:s.icon}),e.jsxs("div",{children:[e.jsx("p",{className:"font-medium text-slate-900",children:s.label}),e.jsx("p",{className:"text-xs text-slate-500",children:s.desc})]})]})})},s.href+s.label))})]}),e.jsxs("div",{className:"grid lg:grid-cols-2 gap-6",children:[e.jsx(l,{children:e.jsxs("div",{className:"p-6",children:[e.jsxs("div",{className:"flex items-center justify-between mb-4",children:[e.jsx("h2",{className:"text-lg font-semibold text-slate-900",children:"Recent Agencies"}),e.jsx(d,{to:"/admin/agencies",className:"text-sm text-shield-600 hover:text-shield-700 font-medium",children:"View all"})]}),n.length===0?e.jsx("p",{className:"text-sm text-slate-400 text-center py-8",children:"No agencies yet"}):e.jsx("div",{className:"space-y-1",children:n.map(s=>e.jsxs("div",{className:"flex items-center justify-between py-3 border-b border-slate-50 last:border-0",children:[e.jsxs("div",{className:"min-w-0",children:[e.jsx("p",{className:"font-medium text-slate-900 truncate",children:s.name}),e.jsx("p",{className:"text-xs text-slate-500",children:s.owner?.name??"No owner"})]}),e.jsx(o,{variant:s.is_verified?"success":"warning",children:s.is_verified?"Verified":"Pending"})]},s.id))})]})}),e.jsx(l,{children:e.jsxs("div",{className:"p-6",children:[e.jsx("h2",{className:"text-lg font-semibold text-slate-900 mb-4",children:"System Health"}),w||!c?e.jsx("p",{className:"text-sm text-slate-400 text-center py-8",children:"System health check unavailable"}):e.jsxs("div",{className:"space-y-1",children:[Object.entries(c.checks).map(([s,a])=>e.jsxs("div",{className:"flex items-center justify-between py-3 border-b border-slate-50 last:border-0",children:[e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx("div",{className:`w-2.5 h-2.5 rounded-full ${a.status==="ok"?"bg-green-500":a.status==="warning"?"bg-yellow-500":"bg-red-500"}`}),e.jsx("p",{className:"font-medium text-slate-900 capitalize",children:s})]}),e.jsx("span",{className:"text-xs text-slate-500",children:a.message})]},s)),e.jsx("div",{className:"pt-3",children:e.jsx(o,{variant:c.status==="healthy"?"success":"warning",children:c.status==="healthy"?"All Systems Healthy":"Degraded"})})]})]})})]})]})}export{B as default};
