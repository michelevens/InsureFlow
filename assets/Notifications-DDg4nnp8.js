import{j as e}from"./vendor-query-D5ml2kdZ.js";import{u as j,r as o}from"./vendor-react-C8VcOkCS.js";import{n as u,B as b}from"./index-BZEM9EbM.js";import{B as N}from"./Badge-8fS5vckW.js";import{ad as v,B as h,C as w,as as y,F as f,U as k,T as C,D as S,M as A,S as M,a as $}from"./vendor-ui-tJ0aMxU9.js";const B={target:$,"file-text":f,"shield-check":M,"message-square":A,"dollar-sign":S,"trending-up":C,"user-plus":k,"clipboard-list":f};function T(c){const l=new Date(c),d=new Date().getTime()-l.getTime(),s=Math.floor(d/6e4);if(s<1)return"Just now";if(s<60)return`${s}m ago`;const a=Math.floor(s/60);if(a<24)return`${a}h ago`;const r=Math.floor(a/24);return r<7?`${r}d ago`:l.toLocaleDateString()}function _(){const c=j(),[l,n]=o.useState([]),[d,s]=o.useState(!0),[a,r]=o.useState("all");o.useEffect(()=>{s(!0),u.getAll(a==="unread").then(t=>n(t.notifications)).catch(()=>{v.error("Failed to load notifications")}).finally(()=>s(!1))},[a]);const g=async t=>{if(!t.read)try{await u.markAsRead(t.id),n(i=>i.map(x=>x.id===t.id?{...x,read:!0}:x))}catch{}t.action_url&&c(t.action_url)},p=async()=>{try{await u.markAllAsRead(),n(t=>t.map(i=>({...i,read:!0})))}catch{}},m=l.filter(t=>!t.read).length;return e.jsxs("div",{children:[e.jsxs("div",{className:"flex items-center justify-between mb-6",children:[e.jsxs("div",{children:[e.jsxs("h1",{className:"text-2xl font-bold text-slate-900 flex items-center gap-3",children:[e.jsx(h,{className:"w-6 h-6 text-teal-600"}),"Notifications",m>0&&e.jsxs(N,{variant:"danger",size:"sm",children:[m," unread"]})]}),e.jsx("p",{className:"text-slate-500 text-sm mt-1",children:"Stay updated on your insurance activity"})]}),m>0&&e.jsxs(b,{variant:"shield",size:"sm",onClick:p,children:[e.jsx(w,{className:"w-4 h-4 mr-1"})," Mark All Read"]})]}),e.jsxs("div",{className:"flex gap-2 mb-6",children:[e.jsx("button",{onClick:()=>r("all"),className:`px-4 py-2 text-sm font-medium rounded-lg transition-colors ${a==="all"?"bg-teal-50 text-teal-700 border border-teal-200":"text-slate-500 hover:bg-slate-100"}`,children:"All"}),e.jsxs("button",{onClick:()=>r("unread"),className:`px-4 py-2 text-sm font-medium rounded-lg transition-colors flex items-center gap-1.5 ${a==="unread"?"bg-teal-50 text-teal-700 border border-teal-200":"text-slate-500 hover:bg-slate-100"}`,children:[e.jsx(y,{className:"w-3.5 h-3.5"})," Unread"]})]}),e.jsx("div",{className:"bg-white rounded-xl border border-slate-200 overflow-hidden",children:d?e.jsx("div",{className:"flex items-center justify-center py-16",children:e.jsx("div",{className:"w-6 h-6 border-2 border-teal-200 border-t-teal-600 rounded-full animate-spin"})}):l.length===0?e.jsxs("div",{className:"py-16 text-center",children:[e.jsx("div",{className:"w-14 h-14 bg-slate-100 rounded-xl flex items-center justify-center mx-auto mb-3",children:e.jsx(h,{className:"w-7 h-7 text-slate-400"})}),e.jsx("p",{className:"text-slate-600 font-medium",children:a==="unread"?"No unread notifications":"No notifications yet"}),e.jsx("p",{className:"text-sm text-slate-400 mt-1",children:a==="unread"?"You're all caught up!":"Notifications will appear here as activity happens"})]}):l.map(t=>{const i=B[t.icon||""]||h;return e.jsxs("button",{onClick:()=>g(t),className:`w-full flex items-start gap-4 p-5 text-left border-b border-slate-100 hover:bg-slate-50 transition-colors ${t.read?"":"bg-teal-50/40"}`,children:[e.jsx("div",{className:`w-10 h-10 rounded-xl flex items-center justify-center shrink-0 ${t.read?"bg-slate-100 text-slate-400":"bg-teal-100 text-teal-600"}`,children:e.jsx(i,{className:"w-5 h-5"})}),e.jsxs("div",{className:"flex-1 min-w-0",children:[e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("p",{className:`text-sm ${t.read?"font-medium text-slate-700":"font-semibold text-slate-900"}`,children:t.title}),!t.read&&e.jsx("div",{className:"w-2 h-2 bg-teal-500 rounded-full shrink-0"})]}),e.jsx("p",{className:"text-sm text-slate-500 mt-0.5",children:t.body}),e.jsx("p",{className:"text-xs text-slate-400 mt-1.5",children:T(t.created_at)})]})]},t.id)})})]})}export{_ as default};
