import{j as e}from"./vendor-query-D5ml2kdZ.js";import{e as A,f as E,r as a,L as D}from"./vendor-react-C8VcOkCS.js";import{b as m,C as d,I as n,B as F}from"./index-8sQqf4Gi.js";import{L as q,S as g,a2 as R}from"./vendor-ui-tJ0aMxU9.js";const B=["Auto","Home","Renters","Life - Term","Life - Whole","Health - Individual","Health - Group","Commercial GL","Workers Comp","Disability - STD","Disability - LTD","Long Term Care","Medicare","Dental","Vision","Umbrella","Other"],G=[{value:"asap",label:"As soon as possible"},{value:"this_month",label:"Within the next month"},{value:"exploring",label:"Just exploring options"}];function O(){const{agencyCode:i}=A(),[r]=E(),u=r.get("agent"),j=r.get("utm_source"),N=r.get("utm_medium"),b=r.get("utm_campaign"),[x,v]=a.useState(""),[y,_]=a.useState(!0),[S,C]=a.useState(!1),[w,L]=a.useState(!1),[h,p]=a.useState(!1),[f,c]=a.useState(""),[I,T]=a.useState(B),[t,l]=a.useState({first_name:"",last_name:"",email:"",phone:"",zip_code:"",insurance_type:"",urgency:"",notes:""});a.useEffect(()=>{i&&(m.get(`/intake/${i}`).then(s=>{v(s.agency_name)}).catch(()=>{C(!0)}).finally(()=>{_(!1)}),m.get("/products/visible").then(s=>{const o=s;o.products?.length>0&&T(o.products.map(P=>P.name))}).catch(()=>{}))},[i]);const k=async s=>{if(s.preventDefault(),!t.first_name||!t.last_name||!t.email||!t.insurance_type){c("Please fill in all required fields");return}p(!0),c("");try{await m.post(`/intake/${i}`,{...t,agent_id:u?Number(u):void 0,utm_source:j||void 0,utm_medium:N||void 0,utm_campaign:b||void 0}),L(!0)}catch{c("Something went wrong. Please try again.")}finally{p(!1)}};return y?e.jsx("div",{className:"min-h-screen bg-slate-50 flex items-center justify-center",children:e.jsx(q,{className:"w-8 h-8 animate-spin text-shield-500"})}):S?e.jsx("div",{className:"min-h-screen bg-slate-50 flex items-center justify-center p-4",children:e.jsxs(d,{className:"max-w-md w-full p-8 text-center",children:[e.jsx(g,{className:"w-12 h-12 text-slate-300 mx-auto mb-4"}),e.jsx("h1",{className:"text-xl font-bold text-slate-900 mb-2",children:"Invalid Link"}),e.jsx("p",{className:"text-slate-500 mb-4",children:"This intake link is no longer active or does not exist."}),e.jsx(D,{to:"/",className:"text-shield-600 hover:underline text-sm",children:"Go to InsureFlow"})]})}):w?e.jsx("div",{className:"min-h-screen bg-slate-50 flex items-center justify-center p-4",children:e.jsxs(d,{className:"max-w-md w-full p-8 text-center",children:[e.jsx(R,{className:"w-16 h-16 text-savings-500 mx-auto mb-4"}),e.jsx("h1",{className:"text-2xl font-bold text-slate-900 mb-2",children:"Thank You!"}),e.jsx("p",{className:"text-slate-600 mb-1",children:"Your information has been submitted successfully."}),e.jsxs("p",{className:"text-slate-500 text-sm",children:["A licensed agent from ",e.jsx("span",{className:"font-semibold",children:x})," will contact you shortly."]})]})}):e.jsx("div",{className:"min-h-screen bg-slate-50 flex items-center justify-center p-4",children:e.jsxs(d,{className:"max-w-lg w-full p-8",children:[e.jsxs("div",{className:"text-center mb-6",children:[e.jsx(g,{className:"w-10 h-10 text-shield-600 mx-auto mb-3"}),e.jsx("h1",{className:"text-2xl font-bold text-slate-900",children:x}),e.jsx("p",{className:"text-slate-500 mt-1",children:"Tell us about your insurance needs and we'll be in touch."})]}),e.jsxs("form",{onSubmit:k,className:"space-y-4",children:[e.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[e.jsxs("div",{className:"space-y-1",children:[e.jsx("label",{className:"text-sm font-medium text-slate-700",children:"First Name *"}),e.jsx(n,{value:t.first_name,onChange:s=>l({...t,first_name:s.target.value}),placeholder:"John",required:!0})]}),e.jsxs("div",{className:"space-y-1",children:[e.jsx("label",{className:"text-sm font-medium text-slate-700",children:"Last Name *"}),e.jsx(n,{value:t.last_name,onChange:s=>l({...t,last_name:s.target.value}),placeholder:"Doe",required:!0})]})]}),e.jsxs("div",{className:"space-y-1",children:[e.jsx("label",{className:"text-sm font-medium text-slate-700",children:"Email *"}),e.jsx(n,{type:"email",value:t.email,onChange:s=>l({...t,email:s.target.value}),placeholder:"john@example.com",required:!0})]}),e.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[e.jsxs("div",{className:"space-y-1",children:[e.jsx("label",{className:"text-sm font-medium text-slate-700",children:"Phone"}),e.jsx(n,{value:t.phone,onChange:s=>l({...t,phone:s.target.value}),placeholder:"(555) 123-4567"})]}),e.jsxs("div",{className:"space-y-1",children:[e.jsx("label",{className:"text-sm font-medium text-slate-700",children:"ZIP Code"}),e.jsx(n,{value:t.zip_code,onChange:s=>l({...t,zip_code:s.target.value}),placeholder:"33607",maxLength:5})]})]}),e.jsxs("div",{className:"space-y-1",children:[e.jsx("label",{className:"text-sm font-medium text-slate-700",children:"Insurance Type *"}),e.jsxs("select",{value:t.insurance_type,onChange:s=>l({...t,insurance_type:s.target.value}),required:!0,className:"w-full px-3 py-2 border border-slate-300 rounded-lg text-sm focus:outline-none focus:ring-2 focus:ring-shield-500",children:[e.jsx("option",{value:"",children:"Select type..."}),I.map(s=>e.jsx("option",{value:s,children:s},s))]})]}),e.jsxs("div",{className:"space-y-1",children:[e.jsx("label",{className:"text-sm font-medium text-slate-700",children:"When do you need coverage?"}),e.jsxs("select",{value:t.urgency,onChange:s=>l({...t,urgency:s.target.value}),className:"w-full px-3 py-2 border border-slate-300 rounded-lg text-sm focus:outline-none focus:ring-2 focus:ring-shield-500",children:[e.jsx("option",{value:"",children:"Select timeline..."}),G.map(s=>e.jsx("option",{value:s.value,children:s.label},s.value))]})]}),e.jsxs("div",{className:"space-y-1",children:[e.jsx("label",{className:"text-sm font-medium text-slate-700",children:"Additional Notes"}),e.jsx("textarea",{value:t.notes,onChange:s=>l({...t,notes:s.target.value}),placeholder:"Tell us about your specific needs...",className:"w-full px-3 py-2 border border-slate-300 rounded-lg text-sm focus:outline-none focus:ring-2 focus:ring-shield-500 min-h-[80px]"})]}),f&&e.jsx("p",{className:"text-sm text-red-500",children:f}),e.jsx(F,{type:"submit",className:"w-full",disabled:h,children:h?"Submitting...":"Request a Quote"}),e.jsxs("p",{className:"text-xs text-slate-400 text-center",children:["Powered by ",e.jsx("a",{href:"/",className:"text-shield-600 hover:underline",children:"InsureFlow"})]})]})]})})}export{O as default};
