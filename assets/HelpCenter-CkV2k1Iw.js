import{j as e}from"./vendor-query-D5ml2kdZ.js";import{r as n}from"./vendor-react-C8VcOkCS.js";import{ad as u,ae as E,h as F,aD as B,k as L,A as $,aM as U,b5 as Q}from"./vendor-ui-tJ0aMxU9.js";import{b as c,C as i,B as N}from"./index-8sQqf4Gi.js";import{B as R}from"./Badge-CDix051U.js";function T(t){if(!t)return"";const a=Object.entries(t).filter(([,d])=>d!==void 0);return a.length?"?"+new URLSearchParams(a.map(([d,g])=>[d,String(g)])).toString():""}const h={getCategories:()=>c.get("/help/categories"),getArticlesByCategory:t=>c.get(`/help/categories/${t}/articles`),getArticle:t=>c.get(`/help/articles/${t}`),search:t=>c.get(`/help/search?q=${encodeURIComponent(t)}`),voteHelpful:(t,a)=>c.post(`/help/articles/${t}/vote`,{helpful:a}),listArticles:t=>c.get(`/admin/help/articles${T(t)}`),createArticle:t=>c.post("/admin/help/articles",t),updateArticle:(t,a)=>c.put(`/admin/help/articles/${t}`,a),deleteArticle:t=>c.delete(`/admin/help/articles/${t}`),createCategory:t=>c.post("/admin/help/categories",t),updateCategory:(t,a)=>c.put(`/admin/help/categories/${t}`,a),deleteCategory:t=>c.delete(`/admin/help/categories/${t}`)};function K(){const[t,a]=n.useState("categories"),[d,g]=n.useState([]),[v,y]=n.useState([]),[l,j]=n.useState(null),[m,w]=n.useState(""),[x,p]=n.useState(null),[D,o]=n.useState(!0),[f,b]=n.useState(null);n.useEffect(()=>{h.getCategories().then(g).catch(()=>{u.error("Failed to load help categories")}).finally(()=>o(!1))},[]);const C=async()=>{if(!m.trim()){p(null);return}o(!0);try{const s=await h.search(m);p(s)}catch{p([])}finally{o(!1)}},H=async s=>{b(s),a("articles"),o(!0);try{const r=await h.getArticlesByCategory(s.slug);y(r)}catch{y([])}finally{o(!1)}},_=async s=>{o(!0);try{const r=await h.getArticle(s);j(r),a("article")}catch{u.error("Failed to load article")}finally{o(!1)}},k=async(s,r)=>{try{await h.voteHelpful(s,r),u.success("Thank you for your feedback!"),l&&l.id===s&&j({...l,helpful_count:r?l.helpful_count+1:l.helpful_count,not_helpful_count:r?l.not_helpful_count:l.not_helpful_count+1})}catch{u.error("Failed to submit your vote")}},S=()=>{t==="article"?(a("articles"),j(null)):t==="articles"&&(a("categories"),b(null))},A={"getting-started":"ðŸš€",account:"ðŸ‘¤",billing:"ðŸ’³",agents:"ðŸ¤",policies:"ðŸ“‹",claims:"âš ï¸",api:"ðŸ”Œ",security:"ðŸ”’"};return e.jsxs("div",{className:"space-y-6",children:[e.jsxs("div",{className:"text-center",children:[e.jsx("h1",{className:"text-2xl font-bold text-slate-900",children:"Help Center"}),e.jsx("p",{className:"text-slate-500 mt-1",children:"Find answers and learn how to use Insurons"})]}),e.jsx(i,{className:"p-4",children:e.jsxs("div",{className:"flex gap-2",children:[e.jsxs("div",{className:"relative flex-1",children:[e.jsx(E,{className:"absolute left-3 top-1/2 -translate-y-1/2 w-4 h-4 text-slate-400"}),e.jsx("input",{type:"text",placeholder:"Search articles...",value:m,onChange:s=>w(s.target.value),onKeyDown:s=>s.key==="Enter"&&C(),className:"w-full pl-10 pr-4 py-2.5 border border-slate-200 rounded-xl text-sm focus:ring-2 focus:ring-shield-500 focus:border-shield-500"})]}),e.jsx(N,{variant:"shield",onClick:C,children:"Search"})]})}),x!==null?e.jsxs("div",{className:"space-y-3",children:[e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("p",{className:"text-sm text-slate-500",children:[x.length," result",x.length!==1?"s":"",' for "',m,'"']}),e.jsx("button",{onClick:()=>{p(null),w("")},className:"text-sm text-shield-600 hover:text-shield-700",children:"Clear"})]}),x.map(s=>e.jsxs(i,{className:"p-4 cursor-pointer hover:shadow-md transition-all",onClick:()=>_(s.slug),children:[e.jsx("h3",{className:"font-medium text-slate-900",children:s.title}),e.jsx("p",{className:"text-sm text-slate-500 mt-1 line-clamp-2",children:s.excerpt}),e.jsxs("div",{className:"flex items-center gap-2 mt-2",children:[s.category_name&&e.jsx(R,{variant:"default",children:s.category_name}),e.jsxs("span",{className:"text-xs text-slate-400",children:[s.view_count," views"]})]})]},s.id)),x.length===0&&e.jsxs(i,{className:"p-8 text-center",children:[e.jsx(F,{className:"w-8 h-8 text-slate-300 mx-auto mb-2"}),e.jsx("p",{className:"text-slate-500",children:"No articles found"})]})]}):D?e.jsx(i,{className:"p-8 text-center",children:e.jsx("div",{className:"w-8 h-8 border-4 border-shield-200 border-t-shield-600 rounded-full animate-spin mx-auto"})}):t==="categories"?e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-4",children:[d.map(s=>e.jsxs(i,{className:"p-5 cursor-pointer hover:shadow-md transition-all group",onClick:()=>H(s),children:[e.jsxs("div",{className:"flex items-start justify-between",children:[e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx("span",{className:"text-2xl",children:A[s.slug]||"ðŸ“"}),e.jsxs("div",{children:[e.jsx("h3",{className:"font-bold text-slate-900 group-hover:text-shield-600 transition-colors",children:s.name}),s.description&&e.jsx("p",{className:"text-xs text-slate-500 mt-0.5",children:s.description})]})]}),e.jsx(B,{className:"w-5 h-5 text-slate-300 group-hover:text-shield-400 transition-colors"})]}),e.jsxs("p",{className:"text-xs text-slate-400 mt-3",children:[s.article_count," article",s.article_count!==1?"s":""]})]},s.id)),d.length===0&&e.jsxs(i,{className:"p-12 text-center col-span-3",children:[e.jsx(L,{className:"w-12 h-12 text-slate-300 mx-auto mb-3"}),e.jsx("p",{className:"text-slate-500",children:"Help center is being set up"})]})]}):t==="articles"?e.jsxs("div",{className:"space-y-3",children:[e.jsxs("button",{onClick:S,className:"flex items-center gap-1 text-sm text-shield-600 hover:text-shield-700",children:[e.jsx($,{className:"w-4 h-4"})," Back to categories"]}),f&&e.jsxs("div",{className:"flex items-center gap-3 mb-2",children:[e.jsx("span",{className:"text-2xl",children:A[f.slug]||"ðŸ“"}),e.jsx("h2",{className:"text-xl font-bold text-slate-900",children:f.name})]}),v.map(s=>e.jsxs(i,{className:"p-4 cursor-pointer hover:shadow-md transition-all",onClick:()=>_(s.slug),children:[e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsx("h3",{className:"font-medium text-slate-900",children:s.title}),e.jsx("p",{className:"text-sm text-slate-500 mt-0.5 line-clamp-1",children:s.excerpt})]}),e.jsx(B,{className:"w-5 h-5 text-slate-300 flex-shrink-0"})]}),e.jsxs("div",{className:"flex items-center gap-3 mt-2 text-xs text-slate-400",children:[e.jsxs("span",{children:[s.view_count," views"]}),e.jsxs("span",{children:[s.helpful_count," found helpful"]}),s.tags?.slice(0,3).map(r=>e.jsx("span",{className:"bg-slate-100 text-slate-500 px-2 py-0.5 rounded-full",children:r},r))]})]},s.id)),v.length===0&&e.jsx(i,{className:"p-8 text-center",children:e.jsx("p",{className:"text-slate-400",children:"No articles in this category yet"})})]}):t==="article"&&l?e.jsxs("div",{className:"space-y-4",children:[e.jsxs("button",{onClick:S,className:"flex items-center gap-1 text-sm text-shield-600 hover:text-shield-700",children:[e.jsx($,{className:"w-4 h-4"})," Back to articles"]}),e.jsxs(i,{className:"p-6 lg:p-8",children:[e.jsx("h1",{className:"text-2xl font-bold text-slate-900 mb-2",children:l.title}),e.jsxs("div",{className:"flex items-center gap-3 text-sm text-slate-500 mb-6",children:[l.category_name&&e.jsx(R,{variant:"default",children:l.category_name}),e.jsxs("span",{children:[l.view_count," views"]}),e.jsxs("span",{children:["Updated ",new Date(l.updated_at).toLocaleDateString()]})]}),e.jsx("div",{className:"prose prose-slate max-w-none text-sm leading-relaxed whitespace-pre-wrap",children:l.content_markdown}),l.tags&&l.tags.length>0&&e.jsx("div",{className:"flex flex-wrap gap-2 mt-6 pt-4 border-t border-slate-100",children:l.tags.map(s=>e.jsx("span",{className:"text-xs bg-slate-100 text-slate-600 px-2.5 py-1 rounded-full",children:s},s))})]}),e.jsxs(i,{className:"p-5 text-center",children:[e.jsx("p",{className:"text-sm text-slate-600 mb-3",children:"Was this article helpful?"}),e.jsxs("div",{className:"flex items-center justify-center gap-3",children:[e.jsxs(N,{variant:"outline",size:"sm",onClick:()=>k(l.id,!0),children:[e.jsx(U,{className:"w-4 h-4 mr-1"})," Yes (",l.helpful_count,")"]}),e.jsxs(N,{variant:"outline",size:"sm",onClick:()=>k(l.id,!1),children:[e.jsx(Q,{className:"w-4 h-4 mr-1"})," No (",l.not_helpful_count,")"]})]})]})]}):null]})}export{K as default};
