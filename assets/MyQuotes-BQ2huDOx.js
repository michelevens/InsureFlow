import{j as e}from"./vendor-query-D5ml2kdZ.js";import{r as l,L as r}from"./vendor-react-C8VcOkCS.js";import{C as i,B as m}from"./index-8sQqf4Gi.js";import{B as c}from"./Badge-CDix051U.js";import{E as u}from"./EmptyState-BJ9LqOXy.js";import{m as p}from"./marketplace-CSbNM9Sw.js";import{ad as j,L as f,s as g,q as N,a0 as v,Q as w,an as _,a5 as b}from"./vendor-ui-tJ0aMxU9.js";const d=t=>t.replace(/_/g," ").replace(/\b\w/g,n=>n.toUpperCase()),y=t=>t?`$${Number(t).toLocaleString()}`:"—",S={pending:"warning",viewed:"info",accepted:"success",declined:"danger"};function R(){const[t,n]=l.useState([]),[a,o]=l.useState([]),[x,h]=l.useState(!0);return l.useEffect(()=>{p.consumerDashboard().then(s=>{n(s.quote_requests),o(s.scenarios_received)}).catch(()=>{j.error("Failed to load your quotes")}).finally(()=>h(!1))},[]),x?e.jsx("div",{className:"flex items-center justify-center py-20",children:e.jsx(f,{className:"w-8 h-8 animate-spin text-shield-400"})}):t.length===0&&a.length===0?e.jsxs("div",{children:[e.jsx("h1",{className:"text-2xl font-bold text-slate-900 mb-6",children:"My Quotes"}),e.jsx(i,{children:e.jsx(u,{icon:e.jsx(g,{className:"w-8 h-8"}),title:"No quotes yet",description:"Submit an insurance request and agents will send you personalized quotes to compare",actionLabel:"Get Quotes",onAction:()=>window.location.href="/insurance/request"})})]}):e.jsxs("div",{className:"space-y-8",children:[e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsx("h1",{className:"text-2xl font-bold text-slate-900",children:"My Quotes"}),e.jsxs("p",{className:"text-slate-500 mt-1",children:[a.length," quote",a.length!==1?"s":""," received from ",new Set(a.map(s=>s.agent?.id)).size," agent",new Set(a.map(s=>s.agent?.id)).size!==1?"s":""]})]}),e.jsx(r,{to:"/insurance/request",children:e.jsx(m,{variant:"shield",size:"sm",leftIcon:e.jsx(N,{className:"w-4 h-4"}),children:"New Request"})})]}),a.length>0&&e.jsxs("div",{children:[e.jsx("h2",{className:"text-lg font-semibold text-slate-900 mb-3",children:"Quotes Received"}),e.jsx("div",{className:"grid md:grid-cols-2 gap-4",children:a.map(s=>e.jsx(i,{className:"hover:shadow-lg transition-shadow",children:e.jsxs("div",{className:"p-5",children:[e.jsxs("div",{className:"flex items-center justify-between mb-3",children:[e.jsx(c,{variant:"info",children:d(s.product_type)}),e.jsxs(c,{variant:S[s.consumer_status]??"default",size:"sm",children:[s.consumer_status?.charAt(0).toUpperCase(),s.consumer_status?.slice(1)]})]}),e.jsx("h3",{className:"text-lg font-semibold text-slate-900 mb-1",children:s.scenario_name}),(s.best_quoted_premium||s.target_premium_monthly)&&e.jsxs("div",{className:"flex items-baseline gap-1 mb-3",children:[e.jsx("span",{className:"text-2xl font-bold text-shield-600",children:y(s.best_quoted_premium||s.target_premium_monthly)}),e.jsx("span",{className:"text-slate-500",children:"/mo"})]}),e.jsxs("div",{className:"space-y-1 mb-4",children:[s.agent&&e.jsxs("div",{className:"flex items-center gap-2 text-sm text-slate-600",children:[e.jsx(v,{className:"w-3.5 h-3.5 text-slate-400"}),s.agent.name]}),s.lead?.agency&&e.jsxs("div",{className:"flex items-center gap-2 text-sm text-slate-600",children:[e.jsx(w,{className:"w-3.5 h-3.5 text-slate-400"}),s.lead.agency.name]}),s.sent_to_consumer_at&&e.jsxs("div",{className:"flex items-center gap-2 text-xs text-slate-400",children:[e.jsx(_,{className:"w-3.5 h-3.5"}),"Received ",new Date(s.sent_to_consumer_at).toLocaleDateString()]})]}),s.consumer_token&&e.jsx("div",{className:"flex gap-2",children:e.jsx(r,{to:`/scenarios/${s.consumer_token}/view`,className:"flex-1",children:e.jsx(m,{variant:"shield",size:"sm",className:"w-full",rightIcon:e.jsx(b,{className:"w-4 h-4"}),children:"View Details"})})})]})},s.id))})]}),t.length>0&&e.jsxs("div",{children:[e.jsx("h2",{className:"text-lg font-semibold text-slate-900 mb-3",children:"Your Requests"}),e.jsx("div",{className:"space-y-3",children:t.map(s=>e.jsx(i,{className:"p-4",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{className:"flex items-center gap-4",children:[e.jsx(c,{variant:s.status==="pending"?"warning":"success",children:s.status}),e.jsx("span",{className:"font-medium text-slate-900",children:d(s.insurance_type)}),e.jsxs("span",{className:"text-sm text-slate-500",children:[s.state," — ",s.zip_code]})]}),e.jsx("span",{className:"text-xs text-slate-400",children:new Date(s.created_at).toLocaleDateString()})]})},s.id))})]})]})}export{R as default};
