import{j as e}from"./vendor-query-D5ml2kdZ.js";import{r as l,L as w}from"./vendor-react-C8VcOkCS.js";import{C as m,B as x}from"./index-8sQqf4Gi.js";import{B as b}from"./Badge-CDix051U.js";import{E as y}from"./EmptyState-BJ9LqOXy.js";import{m as C}from"./marketplace-CSbNM9Sw.js";import{ad as S,L as _,F as k,at as j,a5 as L,aa as c,a6 as h,an as A}from"./vendor-ui-tJ0aMxU9.js";const u={draft:{label:"Pending Signature",variant:"warning",icon:e.jsx(j,{className:"w-4 h-4"})},submitted:{label:"Submitted",variant:"shield",icon:e.jsx(A,{className:"w-4 h-4"})},under_review:{label:"Under Review",variant:"info",icon:e.jsx(h,{className:"w-4 h-4"})},approved:{label:"Approved",variant:"success",icon:e.jsx(c,{className:"w-4 h-4"})},declined:{label:"Declined",variant:"danger",icon:e.jsx(h,{className:"w-4 h-4"})},bound:{label:"Policy Bound",variant:"success",icon:e.jsx(c,{className:"w-4 h-4"})}},D=t=>t.replace(/_/g," ").replace(/\b\w/g,i=>i.toUpperCase());function I(){const[t,i]=l.useState([]),[f,p]=l.useState(!0);return l.useEffect(()=>{C.consumerDashboard().then(s=>{i(s.applications)}).catch(()=>{S.error("Failed to load applications")}).finally(()=>p(!1))},[]),f?e.jsx("div",{className:"flex items-center justify-center py-20",children:e.jsx(_,{className:"w-8 h-8 animate-spin text-shield-400"})}):t.length===0?e.jsxs("div",{children:[e.jsx("h1",{className:"text-2xl font-bold text-slate-900 mb-6",children:"My Applications"}),e.jsx(m,{children:e.jsx(y,{icon:e.jsx(k,{className:"w-8 h-8"}),title:"No applications yet",description:"Once you accept a quote and sign an application, you can track its progress here",actionLabel:"View My Quotes",onAction:()=>window.location.href="/portal/quotes"})})]}):e.jsxs("div",{className:"space-y-6",children:[e.jsxs("div",{children:[e.jsx("h1",{className:"text-2xl font-bold text-slate-900",children:"My Applications"}),e.jsx("p",{className:"text-slate-500 mt-1",children:"Track the status of your insurance applications"})]}),e.jsx("div",{className:"space-y-4",children:t.map(s=>{const r=u[s.status]||u.submitted,N=s.status==="draft"&&s.signing_token&&!s.signed_at;return e.jsx(m,{children:e.jsxs("div",{className:"p-6",children:[e.jsxs("div",{className:"flex items-center justify-between mb-4",children:[e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx("span",{className:"font-mono text-sm text-shield-600",children:s.reference}),e.jsx(b,{variant:r.variant,children:r.label})]}),N?e.jsx(w,{to:`/applications/${s.signing_token}/sign`,children:e.jsx(x,{variant:"shield",size:"sm",leftIcon:e.jsx(j,{className:"w-4 h-4"}),children:"Sign Now"})}):e.jsx(x,{variant:"outline",size:"sm",leftIcon:e.jsx(L,{className:"w-4 h-4"}),children:"View"})]}),e.jsxs("div",{className:"grid grid-cols-2 md:grid-cols-5 gap-4",children:[e.jsxs("div",{children:[e.jsx("p",{className:"text-xs text-slate-500",children:"Type"}),e.jsx("p",{className:"text-sm font-medium text-slate-900",children:D(s.insurance_type)})]}),e.jsxs("div",{children:[e.jsx("p",{className:"text-xs text-slate-500",children:"Carrier"}),e.jsx("p",{className:"text-sm font-medium text-slate-900",children:s.carrier_name})]}),e.jsxs("div",{children:[e.jsx("p",{className:"text-xs text-slate-500",children:"Premium"}),e.jsx("p",{className:"text-sm font-medium text-slate-900",children:Number(s.monthly_premium)>0?`$${Number(s.monthly_premium).toLocaleString()}/mo`:"â€”"})]}),e.jsxs("div",{children:[e.jsx("p",{className:"text-xs text-slate-500",children:"Agent"}),e.jsx("p",{className:"text-sm font-medium text-slate-900",children:s.agent?.name||"â€”"})]}),e.jsxs("div",{children:[e.jsx("p",{className:"text-xs text-slate-500",children:"Date"}),e.jsx("p",{className:"text-sm font-medium text-slate-900",children:new Date(s.created_at).toLocaleDateString()})]})]}),e.jsx("div",{className:"mt-6 flex items-center gap-2",children:["Signed","Submitted","Under Review","Decision"].map((d,a)=>{const g=["draft","submitted","under_review","approved"].indexOf(s.status),o=s.status==="draft"&&s.signed_at?1:g,n=a<=o,v=a===o;return e.jsxs("div",{className:"flex items-center gap-2 flex-1",children:[e.jsx("div",{className:`w-6 h-6 rounded-full flex items-center justify-center text-xs flex-shrink-0 ${n?"gradient-shield text-white":"bg-slate-200 text-slate-500"}`,children:n?e.jsx(c,{className:"w-4 h-4"}):a+1}),e.jsx("span",{className:`text-xs whitespace-nowrap ${v?"font-medium text-shield-700":"text-slate-500"}`,children:d}),a<3&&e.jsx("div",{className:`flex-1 h-0.5 ${n?"bg-shield-500":"bg-slate-200"}`})]},d)})})]})},s.id)})})]})}export{I as default};
