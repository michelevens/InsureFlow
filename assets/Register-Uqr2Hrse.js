import{j as e}from"./vendor-query-D5ml2kdZ.js";import{u as k,r as i,L as b}from"./vendor-react-C8VcOkCS.js";import{u as E,a as I,I as x,S as _,B as M}from"./index-BZEM9EbM.js";import{a0 as A,E as P,a2 as j,a3 as w,Q as L,_ as v,a4 as B,a5 as q,a6 as R}from"./vendor-ui-tJ0aMxU9.js";const z=[{value:"consumer",label:"I need insurance (Consumer)"},{value:"agent",label:"I sell insurance (Agent)"},{value:"agency_owner",label:"I run an agency (Agency Owner)"},{value:"carrier",label:"I represent a carrier (Carrier)"}];function F(r){const n=[{label:"8+ characters",met:r.length>=8},{label:"Uppercase letter",met:/[A-Z]/.test(r)},{label:"Lowercase letter",met:/[a-z]/.test(r)},{label:"Number",met:/[0-9]/.test(r)},{label:"Special character",met:/[^A-Za-z0-9]/.test(r)}],a=n.filter(l=>l.met).length;return a<=2?{score:a,label:"Weak",color:"bg-red-500",checks:n}:a<=3?{score:a,label:"Fair",color:"bg-amber-500",checks:n}:a<=4?{score:a,label:"Good",color:"bg-teal-500",checks:n}:{score:a,label:"Strong",color:"bg-green-500",checks:n}}function U(){const r="ABCDEFGHJKLMNPQRSTUVWXYZ",n="abcdefghjkmnpqrstuvwxyz",a="23456789",l="!@#$%&*?",m=r+n+a+l;let o="";o+=r[Math.floor(Math.random()*r.length)],o+=n[Math.floor(Math.random()*n.length)],o+=a[Math.floor(Math.random()*a.length)],o+=l[Math.floor(Math.random()*l.length)];for(let h=4;h<14;h++)o+=m[Math.floor(Math.random()*m.length)];return o.split("").sort(()=>Math.random()-.5).join("")}function T(){const{register:r}=E(),n=k(),[a,l]=i.useState({name:"",email:"",password:"",password_confirmation:"",role:"",agency_code:""}),[m,o]=i.useState(""),[h,p]=i.useState(!1),[u,d]=i.useState("idle"),[g,f]=i.useState(!1),N=i.useCallback(async s=>{if(!s||!s.includes("@")){d("idle");return}d("checking");try{const t=await I.checkEmail(s);d(t.exists?"taken":"available")}catch{d("idle")}},[]),y=()=>{const s=U();l(t=>({...t,password:s,password_confirmation:s})),f(!0)},C=async s=>{if(s.preventDefault(),!a.role){o("Please select a role");return}if(u==="taken"){o("This email is already registered");return}o(""),p(!0);try{await r({name:a.name,email:a.email,password:a.password,password_confirmation:a.password_confirmation,role:a.role,agency_code:a.agency_code||void 0}),n("/dashboard")}catch(t){o(t instanceof Error?t.message:"Registration failed")}finally{p(!1)}},c=F(a.password),S=a.role==="agent";return e.jsx("div",{className:"min-h-screen bg-slate-50 flex items-center justify-center px-4 py-12",children:e.jsxs("div",{className:"w-full max-w-md",children:[e.jsxs("div",{className:"text-center mb-8",children:[e.jsx("img",{src:"/logo.png",alt:"Insurons",className:"h-20 w-auto mx-auto mb-4"}),e.jsx("h1",{className:"text-2xl font-bold text-slate-900",children:"Create your account"}),e.jsx("p",{className:"text-slate-500 mt-1",children:"Join Insurons and get started"})]}),e.jsx("div",{className:"bg-white rounded-2xl border border-slate-200 p-8",children:e.jsxs("form",{onSubmit:C,className:"space-y-5",children:[m&&e.jsx("div",{className:"p-3 rounded-xl bg-red-50 text-red-600 text-sm",children:m}),e.jsx(x,{label:"Full Name",placeholder:"John Smith",value:a.name,onChange:s=>l(t=>({...t,name:s.target.value})),leftIcon:e.jsx(A,{className:"w-5 h-5"}),required:!0}),e.jsxs("div",{children:[e.jsx(x,{label:"Email",type:"email",placeholder:"you@example.com",value:a.email,onChange:s=>{l(t=>({...t,email:s.target.value})),d("idle")},onBlur:()=>N(a.email),leftIcon:e.jsx(P,{className:"w-5 h-5"}),required:!0}),u==="checking"&&e.jsx("p",{className:"text-xs text-slate-400 mt-1",children:"Checking availability..."}),u==="available"&&e.jsxs("p",{className:"text-xs text-green-600 mt-1 flex items-center gap-1",children:[e.jsx(j,{className:"w-3.5 h-3.5"})," Email is available"]}),u==="taken"&&e.jsxs("p",{className:"text-xs text-red-600 mt-1 flex items-center gap-1",children:[e.jsx(w,{className:"w-3.5 h-3.5"})," Email is already registered."," ",e.jsx(b,{to:"/login",className:"underline",children:"Sign in instead?"})]})]}),e.jsx(_,{label:"I am a...",options:z,placeholder:"Select your role",value:a.role,onChange:s=>l(t=>({...t,role:s.target.value}))}),S&&e.jsxs("div",{children:[e.jsx(x,{label:"Agency Code (optional)",placeholder:"e.g. MARTINEZ",value:a.agency_code,onChange:s=>l(t=>({...t,agency_code:s.target.value.toUpperCase()})),leftIcon:e.jsx(L,{className:"w-5 h-5"})}),e.jsx("p",{className:"text-xs text-slate-400 mt-1",children:"Have an agency code? Enter it to join your agency automatically."})]}),e.jsxs("div",{children:[e.jsxs("div",{className:"flex items-center justify-between mb-1",children:[e.jsx("label",{className:"block text-sm font-medium text-slate-700",children:"Password"}),e.jsx("button",{type:"button",onClick:y,className:"text-xs text-teal-600 hover:text-teal-700 font-medium",children:"Suggest strong password"})]}),e.jsxs("div",{className:"relative",children:[e.jsx(x,{type:g?"text":"password",placeholder:"Create a password",value:a.password,onChange:s=>l(t=>({...t,password:s.target.value})),leftIcon:e.jsx(v,{className:"w-5 h-5"}),required:!0}),e.jsx("button",{type:"button",onClick:()=>f(!g),className:"absolute right-3 top-1/2 -translate-y-1/2 text-slate-400 hover:text-slate-600",children:g?e.jsx(B,{className:"w-4 h-4"}):e.jsx(q,{className:"w-4 h-4"})})]}),a.password.length>0&&e.jsxs("div",{className:"mt-2",children:[e.jsx("div",{className:"flex gap-1 mb-1.5",children:[1,2,3,4,5].map(s=>e.jsx("div",{className:`h-1.5 flex-1 rounded-full transition-colors ${s<=c.score?c.color:"bg-slate-200"}`},s))}),e.jsx("p",{className:`text-xs font-medium ${c.score<=2?"text-red-600":c.score<=3?"text-amber-600":"text-green-600"}`,children:c.label}),e.jsx("div",{className:"flex flex-wrap gap-x-3 gap-y-0.5 mt-1",children:c.checks.map(s=>e.jsxs("span",{className:`text-xs flex items-center gap-0.5 ${s.met?"text-green-600":"text-slate-400"}`,children:[s.met?e.jsx(j,{className:"w-3 h-3"}):e.jsx(R,{className:"w-3 h-3"}),s.label]},s.label))})]})]}),e.jsx(x,{label:"Confirm Password",type:g?"text":"password",placeholder:"Confirm your password",value:a.password_confirmation,onChange:s=>l(t=>({...t,password_confirmation:s.target.value})),leftIcon:e.jsx(v,{className:"w-5 h-5"}),required:!0}),a.password_confirmation&&a.password!==a.password_confirmation&&e.jsxs("p",{className:"text-xs text-red-600 flex items-center gap-1 -mt-3",children:[e.jsx(w,{className:"w-3.5 h-3.5"})," Passwords do not match"]}),e.jsx(M,{type:"submit",variant:"shield",size:"lg",className:"w-full",isLoading:h,children:"Create Account"})]})}),e.jsxs("p",{className:"text-center text-sm text-slate-500 mt-6",children:["Already have an account?"," ",e.jsx(b,{to:"/login",className:"text-shield-600 font-medium hover:underline",children:"Sign in"})]})]})})}export{T as default};
