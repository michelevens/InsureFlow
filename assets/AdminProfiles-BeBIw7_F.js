import{j as e}from"./vendor-query-D5ml2kdZ.js";import{r as a}from"./vendor-react-C8VcOkCS.js";import{C as c,I as z,S as p,B as j}from"./index-CyWO3JYX.js";import{B as x}from"./Badge-DV1ZXp4T.js";import{a as B}from"./admin-BHVqi3KQ.js";import{I as T,ab as O,aW as R,ae as M,L as X,u as K,af as V,aX as W,aD as q,ad as G}from"./vendor-ui-tJ0aMxU9.js";function se(){const[N,y]=a.useState([]),[v,f]=a.useState(!0),[d,g]=a.useState(""),[b,C]=a.useState(""),[i,n]=a.useState("all"),[m,_]=a.useState(""),[o,k]=a.useState(""),[l,P]=a.useState(1),[h,A]=a.useState(1),[S,L]=a.useState(0),[u,F]=a.useState({total:0,claimed:0,unclaimed:0}),[U,D]=a.useState({}),[E,I]=a.useState({}),r=async(s=l)=>{try{f(!0),g("");const t=await B.getProfiles({search:b||void 0,state:m||void 0,source:o||void 0,status:i!=="all"?i:void 0,per_page:25,page:s});y(t.profiles.data),L(t.profiles.total),A(t.profiles.last_page),P(t.profiles.current_page),F(t.summary),D(t.filters.sources),I(t.filters.states)}catch{g("Failed to load profiles"),G.error("Failed to load profiles")}finally{f(!1)}};a.useEffect(()=>{r(1)},[i,m,o]);const $=()=>{r(1)},w=s=>s?s.replace(/_/g," ").replace(/\b\w/g,t=>t.toUpperCase()):"Manual";return e.jsxs("div",{className:"space-y-6",children:[e.jsx("div",{className:"flex items-center justify-between",children:e.jsxs("div",{children:[e.jsx("h1",{className:"text-2xl font-bold text-slate-900",children:"Agent Profiles"}),e.jsx("p",{className:"text-slate-500 mt-1",children:"All profiles — imported from state DOI data and user-created"})]})}),e.jsxs("div",{className:"grid grid-cols-3 gap-4",children:[e.jsxs(c,{className:"p-4 text-center cursor-pointer hover:ring-2 hover:ring-shield-500 transition-all",onClick:()=>{n("all")},children:[e.jsxs("div",{className:"flex items-center justify-center gap-2 mb-1",children:[e.jsx(T,{className:"w-4 h-4 text-slate-400"}),e.jsx("p",{className:"text-2xl font-bold text-slate-900",children:u.total})]}),e.jsx("p",{className:"text-sm text-slate-500",children:"Total Profiles"})]}),e.jsxs(c,{className:"p-4 text-center cursor-pointer hover:ring-2 hover:ring-savings-500 transition-all",onClick:()=>{n("claimed")},children:[e.jsxs("div",{className:"flex items-center justify-center gap-2 mb-1",children:[e.jsx(O,{className:"w-4 h-4 text-savings-500"}),e.jsx("p",{className:"text-2xl font-bold text-savings-600",children:u.claimed})]}),e.jsx("p",{className:"text-sm text-slate-500",children:"Claimed"})]}),e.jsxs(c,{className:"p-4 text-center cursor-pointer hover:ring-2 hover:ring-amber-500 transition-all",onClick:()=>{n("unclaimed")},children:[e.jsxs("div",{className:"flex items-center justify-center gap-2 mb-1",children:[e.jsx(R,{className:"w-4 h-4 text-amber-500"}),e.jsx("p",{className:"text-2xl font-bold text-amber-600",children:u.unclaimed})]}),e.jsx("p",{className:"text-sm text-slate-500",children:"Unclaimed"})]})]}),e.jsxs("div",{className:"flex gap-3 flex-wrap",children:[e.jsx("div",{className:"flex-1 min-w-[200px]",children:e.jsx(z,{placeholder:"Search name, NPN, license #...",value:b,onChange:s=>C(s.target.value),onKeyDown:s=>s.key==="Enter"&&$(),leftIcon:e.jsx(M,{className:"w-5 h-5"})})}),e.jsx("div",{className:"w-40",children:e.jsx(p,{value:i,onChange:s=>n(s.target.value),options:[{value:"all",label:"All Status"},{value:"claimed",label:"Claimed"},{value:"unclaimed",label:"Unclaimed"}]})}),e.jsx("div",{className:"w-36",children:e.jsx(p,{value:m,onChange:s=>_(s.target.value),options:[{value:"",label:"All States"},...Object.entries(E).sort(([s],[t])=>s.localeCompare(t)).map(([s,t])=>({value:s,label:`${s} (${t})`}))]})}),e.jsx("div",{className:"w-44",children:e.jsx(p,{value:o,onChange:s=>k(s.target.value),options:[{value:"",label:"All Sources"},...Object.entries(U).map(([s,t])=>({value:s,label:`${w(s)} (${t})`}))]})})]}),d&&e.jsxs(c,{className:"p-6 text-center",children:[e.jsx("p",{className:"text-red-500",children:d}),e.jsx(j,{variant:"outline",size:"sm",className:"mt-2",onClick:()=>r(),children:"Retry"})]}),v&&e.jsxs(c,{className:"p-12 text-center",children:[e.jsx(X,{className:"w-8 h-8 animate-spin text-shield-500 mx-auto"}),e.jsx("p",{className:"text-slate-500 mt-2",children:"Loading profiles..."})]}),!v&&!d&&e.jsxs(c,{children:[N.length===0?e.jsxs("div",{className:"p-12 text-center",children:[e.jsx(K,{className:"w-12 h-12 text-slate-300 mx-auto mb-3"}),e.jsx("p",{className:"text-slate-500",children:"No profiles found"})]}):e.jsx("div",{className:"overflow-x-auto",children:e.jsxs("table",{className:"w-full",children:[e.jsx("thead",{children:e.jsxs("tr",{className:"border-b border-slate-100",children:[e.jsx("th",{className:"text-left text-xs font-medium text-slate-500 uppercase tracking-wider p-4",children:"Name"}),e.jsx("th",{className:"text-left text-xs font-medium text-slate-500 uppercase tracking-wider p-4",children:"NPN"}),e.jsx("th",{className:"text-left text-xs font-medium text-slate-500 uppercase tracking-wider p-4",children:"License"}),e.jsx("th",{className:"text-left text-xs font-medium text-slate-500 uppercase tracking-wider p-4",children:"State"}),e.jsx("th",{className:"text-left text-xs font-medium text-slate-500 uppercase tracking-wider p-4",children:"Source"}),e.jsx("th",{className:"text-left text-xs font-medium text-slate-500 uppercase tracking-wider p-4",children:"Status"}),e.jsx("th",{className:"text-left text-xs font-medium text-slate-500 uppercase tracking-wider p-4",children:"Created"}),e.jsx("th",{className:"text-right text-xs font-medium text-slate-500 uppercase tracking-wider p-4",children:"Actions"})]})}),e.jsx("tbody",{className:"divide-y divide-slate-50",children:N.map(s=>e.jsxs("tr",{className:"hover:bg-slate-50",children:[e.jsx("td",{className:"p-4",children:e.jsxs("div",{children:[e.jsx("p",{className:"font-medium text-slate-900",children:s.full_name||"—"}),s.license_type&&e.jsx("p",{className:"text-xs text-slate-400",children:s.license_type})]})}),e.jsx("td",{className:"p-4",children:e.jsxs("div",{className:"flex items-center gap-1.5",children:[e.jsx("span",{className:"text-sm text-slate-700 font-mono",children:s.npn||"—"}),s.npn&&e.jsx(x,{variant:s.npn_verified==="verified"?"success":s.npn_verified==="pending"?"warning":"default",className:"text-[10px]",children:s.npn_verified})]})}),e.jsxs("td",{className:"p-4",children:[e.jsx("span",{className:"text-sm text-slate-700 font-mono",children:s.license_number||"—"}),s.license_status&&e.jsx("p",{className:"text-xs text-slate-400 capitalize",children:s.license_status})]}),e.jsxs("td",{className:"p-4",children:[e.jsx("span",{className:"text-sm font-bold text-slate-900",children:s.state||"—"}),s.city&&e.jsxs("p",{className:"text-xs text-slate-400",children:[s.city,s.county?`, ${s.county}`:""]})]}),e.jsx("td",{className:"p-4",children:e.jsx(x,{variant:"info",className:"text-[10px]",children:w(s.source)})}),e.jsxs("td",{className:"p-4",children:[s.is_claimed?e.jsx(x,{variant:"success",children:"Claimed"}):e.jsx(x,{variant:"warning",children:"Unclaimed"}),s.claimed_at&&e.jsx("p",{className:"text-[10px] text-slate-400 mt-0.5",children:new Date(s.claimed_at).toLocaleDateString()})]}),e.jsx("td",{className:"p-4 text-sm text-slate-500",children:s.created_at?.split("T")[0]||"—"}),e.jsx("td",{className:"p-4 text-right",children:s.license_lookup_url&&e.jsxs("a",{href:s.license_lookup_url,target:"_blank",rel:"noopener noreferrer",className:"inline-flex items-center gap-1 text-xs text-shield-600 hover:underline",children:[e.jsx(V,{className:"w-3 h-3"})," Verify"]})})]},s.id))})]})}),h>1&&e.jsxs("div",{className:"flex items-center justify-between px-4 py-3 border-t border-slate-100",children:[e.jsxs("p",{className:"text-sm text-slate-500",children:["Showing ",(l-1)*25+1,"–",Math.min(l*25,S)," of ",S]}),e.jsxs("div",{className:"flex gap-2",children:[e.jsx(j,{variant:"outline",size:"sm",disabled:l<=1,onClick:()=>r(l-1),children:e.jsx(W,{className:"w-4 h-4"})}),e.jsxs("span",{className:"flex items-center text-sm text-slate-700 px-2",children:["Page ",l," of ",h]}),e.jsx(j,{variant:"outline",size:"sm",disabled:l>=h,onClick:()=>r(l+1),children:e.jsx(q,{className:"w-4 h-4"})})]})]})]})]})}export{se as default};
