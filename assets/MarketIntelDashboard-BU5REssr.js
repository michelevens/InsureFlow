import{j as e}from"./vendor-query-D5ml2kdZ.js";import{r as d}from"./vendor-react-C8VcOkCS.js";import{z as f,T as y,u as _,b2 as k,b3 as w,b4 as S,ad as $}from"./vendor-ui-tJ0aMxU9.js";import{b as n,C as l}from"./index-CyWO3JYX.js";import{B as A}from"./Badge-DV1ZXp4T.js";function x(t){if(!t)return"";const m=Object.entries(t).filter(([,i])=>i!==void 0);return m.length?"?"+new URLSearchParams(m.map(([i,o])=>[i,String(o)])).toString():""}const p={listSubscriptions:()=>n.get("/data/subscriptions"),subscribe:t=>n.post("/data/subscriptions",t),cancelSubscription:t=>n.delete(`/data/subscriptions/${t}`),getMarketIntel:t=>n.get(`/data/market-intel${x(t)}`),getCompetitiveAnalysis:t=>n.get(`/data/competitive-analysis${x(t)}`),getAgentBenchmarks:t=>n.get(`/data/agent-benchmarking${x(t)}`),listReports:()=>n.get("/data/reports"),generateReport:t=>n.post("/data/reports/generate",t),downloadReport:t=>n.get(`/data/reports/${t}/download`)};function R(){const[t,m]=d.useState("market"),[i,o]=d.useState("30d"),[c,j]=d.useState(null),[a,u]=d.useState(null),[h,N]=d.useState([]),[b,g]=d.useState(!0);d.useEffect(()=>{(async()=>{g(!0);try{if(t==="market"){const r=await p.getMarketIntel({period:i});j(r)}else if(t==="competitive"){const r=await p.getCompetitiveAnalysis({period:i});u(r)}else{const r=await p.getAgentBenchmarks({period:i,limit:20});N(r)}}catch{$.error("Failed to load market intelligence data")}finally{g(!1)}})()},[t,i]);const v=[{key:"market",label:"Market Intelligence",icon:f},{key:"competitive",label:"Competitive Analysis",icon:y},{key:"benchmarks",label:"Agent Benchmarks",icon:_}];return e.jsxs("div",{className:"space-y-6",children:[e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsx("h1",{className:"text-2xl font-bold text-slate-900",children:"Data & Analytics Products"}),e.jsx("p",{className:"text-slate-500 mt-1",children:"Premium market intelligence and performance insights"})]}),e.jsxs("select",{value:i,onChange:s=>o(s.target.value),className:"text-sm border border-slate-200 rounded-lg px-3 py-2",children:[e.jsx("option",{value:"7d",children:"Last 7 days"}),e.jsx("option",{value:"30d",children:"Last 30 days"}),e.jsx("option",{value:"90d",children:"Last 90 days"}),e.jsx("option",{value:"1y",children:"Last year"})]})]}),e.jsx("div",{className:"flex gap-1 bg-slate-100 rounded-xl p-1",children:v.map(s=>e.jsxs("button",{onClick:()=>m(s.key),className:`flex items-center gap-2 px-4 py-2.5 rounded-lg text-sm font-medium transition-all flex-1 justify-center ${t===s.key?"bg-white text-shield-700 shadow-sm":"text-slate-500 hover:text-slate-700"}`,children:[e.jsx(s.icon,{className:"w-4 h-4"}),s.label]},s.key))}),b?e.jsx(l,{className:"p-8 text-center",children:e.jsx("div",{className:"w-8 h-8 border-4 border-shield-200 border-t-shield-600 rounded-full animate-spin mx-auto"})}):t==="market"&&c?e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-4",children:[e.jsxs(l,{className:"p-5",children:[e.jsx("p",{className:"text-sm text-slate-500",children:"Total Quotes"}),e.jsx("p",{className:"text-2xl font-bold text-slate-900 mt-1",children:c.total_quotes.toLocaleString()})]}),e.jsxs(l,{className:"p-5",children:[e.jsx("p",{className:"text-sm text-slate-500",children:"Avg Premium"}),e.jsxs("p",{className:"text-2xl font-bold text-slate-900 mt-1",children:["$",c.avg_premium.toLocaleString()]})]}),e.jsxs(l,{className:"p-5",children:[e.jsx("p",{className:"text-sm text-slate-500",children:"Top Carrier"}),e.jsx("p",{className:"text-2xl font-bold text-slate-900 mt-1",children:c.top_carriers[0]?.carrier||"N/A"})]})]}),e.jsxs(l,{className:"p-5",children:[e.jsx("h3",{className:"font-bold text-slate-900 mb-4",children:"Carrier Market Share"}),e.jsx("div",{className:"space-y-3",children:c.top_carriers.map((s,r)=>e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsxs("span",{className:"text-sm text-slate-500 w-6",children:[r+1,"."]}),e.jsx("span",{className:"text-sm font-medium text-slate-900 w-40 truncate",children:s.carrier}),e.jsx("div",{className:"flex-1 bg-slate-100 rounded-full h-2.5",children:e.jsx("div",{className:"bg-shield-500 rounded-full h-2.5",style:{width:`${s.market_share}%`}})}),e.jsxs("span",{className:"text-sm font-medium text-slate-700 w-16 text-right",children:[s.market_share.toFixed(1),"%"]})]},r))})]}),e.jsxs(l,{className:"p-5",children:[e.jsx("h3",{className:"font-bold text-slate-900 mb-4",children:"Product Type Distribution"}),e.jsx("div",{className:"grid grid-cols-2 md:grid-cols-4 gap-3",children:c.product_mix.map((s,r)=>e.jsxs("div",{className:"bg-slate-50 rounded-xl p-3 text-center",children:[e.jsxs("p",{className:"text-lg font-bold text-shield-600",children:[s.percentage.toFixed(1),"%"]}),e.jsx("p",{className:"text-xs text-slate-500 mt-1",children:s.product_type})]},r))})]}),e.jsxs(l,{className:"p-5",children:[e.jsx("h3",{className:"font-bold text-slate-900 mb-4",children:"Volume Trends"}),e.jsx("div",{className:"space-y-2",children:c.trends.slice(-10).map((s,r)=>e.jsxs("div",{className:"flex items-center justify-between text-sm py-1.5 border-b border-slate-50 last:border-0",children:[e.jsx("span",{className:"text-slate-500",children:s.period}),e.jsxs("div",{className:"flex items-center gap-6",children:[e.jsxs("span",{className:"text-slate-900 font-medium",children:[s.volume," quotes"]}),e.jsxs("span",{className:"text-slate-500",children:["$",s.avg_premium.toLocaleString()," avg"]})]})]},r))})]})]}):t==="competitive"&&a?e.jsxs("div",{className:"space-y-4",children:[e.jsxs(l,{className:"p-6 text-center",children:[e.jsx(k,{className:"w-12 h-12 text-amber-500 mx-auto mb-2"}),e.jsxs("p",{className:"text-4xl font-bold text-slate-900",children:["Top ",100-a.percentile_rank,"%"]}),e.jsx("p",{className:"text-slate-500 mt-1",children:"Your percentile rank in the market"})]}),e.jsx("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-4",children:[{label:"Conversion Rate",yours:`${(a.your_metrics.conversion_rate*100).toFixed(1)}%`,market:`${(a.market_avg.conversion_rate*100).toFixed(1)}%`,better:a.your_metrics.conversion_rate>a.market_avg.conversion_rate},{label:"Avg Response Time",yours:`${a.your_metrics.avg_response_time.toFixed(1)}h`,market:`${a.market_avg.avg_response_time.toFixed(1)}h`,better:a.your_metrics.avg_response_time<a.market_avg.avg_response_time},{label:"Avg Premium",yours:`$${a.your_metrics.avg_premium.toLocaleString()}`,market:`$${a.market_avg.avg_premium.toLocaleString()}`,better:a.your_metrics.avg_premium>a.market_avg.avg_premium}].map((s,r)=>e.jsxs(l,{className:"p-5",children:[e.jsx("p",{className:"text-sm text-slate-500 mb-3",children:s.label}),e.jsxs("div",{className:"space-y-2",children:[e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsx("span",{className:"text-xs text-slate-400",children:"You"}),e.jsxs("div",{className:"flex items-center gap-1",children:[e.jsx("span",{className:"text-lg font-bold text-slate-900",children:s.yours}),s.better?e.jsx(w,{className:"w-4 h-4 text-green-500"}):e.jsx(S,{className:"w-4 h-4 text-red-500"})]})]}),e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsx("span",{className:"text-xs text-slate-400",children:"Market Avg"}),e.jsx("span",{className:"text-sm text-slate-600",children:s.market})]})]})]},r))}),a.improvement_areas.length>0&&e.jsxs(l,{className:"p-5",children:[e.jsx("h3",{className:"font-bold text-slate-900 mb-3",children:"Areas for Improvement"}),e.jsx("div",{className:"space-y-2",children:a.improvement_areas.map((s,r)=>e.jsxs("div",{className:"flex items-center gap-2 text-sm",children:[e.jsx("div",{className:"w-2 h-2 rounded-full bg-amber-400"}),e.jsx("span",{className:"text-slate-700",children:s})]},r))})]})]}):t==="benchmarks"?e.jsxs(l,{className:"p-5",children:[e.jsx("h3",{className:"font-bold text-slate-900 mb-4",children:"Agent Leaderboard"}),e.jsx("div",{className:"overflow-x-auto",children:e.jsxs("table",{className:"w-full",children:[e.jsx("thead",{children:e.jsxs("tr",{className:"text-left text-xs text-slate-500 uppercase border-b border-slate-100",children:[e.jsx("th",{className:"pb-3 pr-4",children:"Rank"}),e.jsx("th",{className:"pb-3 pr-4",children:"Agent"}),e.jsx("th",{className:"pb-3 pr-4 text-right",children:"Policies"}),e.jsx("th",{className:"pb-3 pr-4 text-right",children:"Premium"}),e.jsx("th",{className:"pb-3 pr-4 text-right",children:"Conversion"}),e.jsx("th",{className:"pb-3 pr-4 text-right",children:"Response Time"}),e.jsx("th",{className:"pb-3 text-right",children:"Retention"})]})}),e.jsxs("tbody",{children:[h.map(s=>e.jsxs("tr",{className:"border-b border-slate-50 last:border-0",children:[e.jsx("td",{className:"py-3 pr-4",children:e.jsx("div",{className:`w-7 h-7 rounded-full flex items-center justify-center text-xs font-bold ${s.rank<=3?"bg-amber-100 text-amber-700":"bg-slate-100 text-slate-600"}`,children:s.rank})}),e.jsx("td",{className:"py-3 pr-4 font-medium text-slate-900",children:s.agent_name}),e.jsx("td",{className:"py-3 pr-4 text-right text-slate-700",children:s.policies_written}),e.jsxs("td",{className:"py-3 pr-4 text-right text-slate-700",children:["$",s.total_premium.toLocaleString()]}),e.jsx("td",{className:"py-3 pr-4 text-right",children:e.jsxs(A,{variant:s.conversion_rate>.3?"success":s.conversion_rate>.15?"warning":"danger",children:[(s.conversion_rate*100).toFixed(1),"%"]})}),e.jsxs("td",{className:"py-3 pr-4 text-right text-slate-700",children:[s.avg_response_time_hours.toFixed(1),"h"]}),e.jsxs("td",{className:"py-3 text-right text-slate-700",children:[(s.retention_rate*100).toFixed(0),"%"]})]},s.agent_id)),h.length===0&&e.jsx("tr",{children:e.jsx("td",{colSpan:7,className:"py-8 text-center text-slate-400",children:"No benchmark data available"})})]})]})})]}):null]})}export{R as default};
