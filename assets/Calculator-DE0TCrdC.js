import{j as l}from"./vendor-query-D5ml2kdZ.js";import{u as J,f as Q,r as s}from"./vendor-react-C8VcOkCS.js";import{C as V,S as N,I as M,B as S}from"./index-8sQqf4Gi.js";import{q as Y}from"./quotes-CN44WaPA.js";import{p as K}from"./platformProducts-DCugOXeL.js";import{S as A,am as Z,X,aa as G,a7 as R,q as ee,an as ae}from"./vendor-ui-tJ0aMxU9.js";const v="insurons_calculator_draft",le=["auto","motorcycle","boat_watercraft","rv_motorhome","commercial_auto","classic_car"],te=["homeowners","renters","condo","flood","landlord","mobile_home"],se=["life_term","life_whole","life_universal","life_variable","life_final_expense"],re=["health_individual","health_family","health_short_term","dental","vision","medicare_supplement","medicare_advantage"],oe=["disability_ltd","disability_std","long_term_care","critical_illness"],ie=["bop","general_liability","workers_comp","commercial_property","professional_liability","cyber_liability","directors_officers","epli","commercial_umbrella"];function ne(r,n){if(le.includes(r))return"vehicle";if(te.includes(r))return"property";if(se.includes(r))return"life";if(re.includes(r))return"health";if(oe.includes(r))return"disability";if(ie.includes(r))return"commercial";const m=n.find(o=>o.slug===r);if(m){const o=m.category.toLowerCase();if(o.includes("personal"))return"vehicle";if(o.includes("life"))return"life";if(o.includes("health"))return"health";if(o.includes("disability"))return"disability";if(o.includes("commercial"))return"commercial"}return"generic"}const ce=[{label:"Personal Lines",options:[{value:"auto",label:"Auto Insurance"},{value:"homeowners",label:"Homeowners Insurance"},{value:"renters",label:"Renters Insurance"}]},{label:"Life",options:[{value:"life_term",label:"Term Life"}]},{label:"Health",options:[{value:"health_individual",label:"Individual Health"}]},{label:"Commercial",options:[{value:"bop",label:"Business Owners Policy (BOP)"},{value:"umbrella_personal",label:"Personal Umbrella"}]}],ue=[{value:"basic",label:"Basic — Minimum required coverage"},{value:"standard",label:"Standard — Balanced coverage & cost (most popular)"},{value:"premium",label:"Premium — Maximum protection & lowest deductibles"}],k={insurance_type:"",zip_code:"",coverage_level:"standard",vehicle_year:"",vehicle_make:"",vehicle_model:"",home_value:"",year_built:"",square_footage:"",date_of_birth:"",smoker:"",coverage_amount:"",health_rating:"",household_size:"",current_coverage:"",occupation:"",annual_income:"",employment_status:"",business_type:"",annual_revenue:"",num_employees:"",years_in_business:""};function de(){try{const r=localStorage.getItem(v);if(!r)return null;const n=JSON.parse(r);if(n.form?.insurance_type&&n.savedAt)return Date.now()-n.savedAt>1440*60*1e3?(localStorage.removeItem(v),null):{form:{...k,...n.form},step:n.step||1}}catch{}return null}function be(){const r=J(),[n]=Q(),m=n.get("agency_id")?parseInt(n.get("agency_id")):void 0,o=s.useMemo(()=>de(),[]),[T,B]=s.useState(!!o),[c,b]=s.useState(o?.step||1),[H,C]=s.useState(!1),[O,I]=s.useState(!0),[f,D]=s.useState([]),[L,q]=s.useState(""),[e,E]=s.useState(o?.form||k),[h,y]=s.useState(0);s.useEffect(()=>{I(!0),K.getVisibleProducts(m).then(a=>D(a.products)).catch(()=>{}).finally(()=>I(!1))},[m]);const P=s.useMemo(()=>{if(f.length>0){const a={};return f.forEach(t=>{a[t.category]||(a[t.category]=[]),a[t.category].push({value:t.slug,label:t.name})}),Object.entries(a).map(([t,p])=>({label:t,options:p}))}return ce},[f]),u=s.useMemo(()=>e.insurance_type?ne(e.insurance_type,f):"generic",[e.insurance_type,f]),W=s.useMemo(()=>{switch(u){case"vehicle":return[{field:"vehicle_year",label:"What year is your vehicle?",placeholder:"2024"},{field:"vehicle_make",label:"What make?",placeholder:"Toyota"},{field:"vehicle_model",label:"What model?",placeholder:"Camry"}];case"property":return[{field:"home_value",label:"What is your home's estimated value?",placeholder:"$350,000"},{field:"year_built",label:"What year was it built?",placeholder:"1995"},{field:"square_footage",label:"How many square feet?",placeholder:"2,000"}];case"life":return[{field:"date_of_birth",label:"What is your date of birth?",type:"date"},{field:"smoker",label:"What is your smoker status?",options:[{value:"non_smoker",label:"Non-Smoker"},{value:"smoker",label:"Smoker"},{value:"former_smoker",label:"Former Smoker (quit 2+ yrs)"}]},{field:"coverage_amount",label:"How much coverage do you want?",placeholder:"$500,000"},{field:"health_rating",label:"How would you rate your general health?",options:[{value:"excellent",label:"Excellent"},{value:"good",label:"Good"},{value:"average",label:"Average"},{value:"below_average",label:"Below Average"}]}];case"health":return[{field:"date_of_birth",label:"What is your date of birth?",type:"date"},{field:"household_size",label:"How many people need coverage?",options:[{value:"1",label:"Just me"},{value:"2",label:"Me + spouse/partner"},{value:"3",label:"Me + 1 dependent"},{value:"4",label:"Me + spouse + 1 dependent"},{value:"5+",label:"Family (5+)"}]},{field:"current_coverage",label:"Do you have coverage now?",options:[{value:"none",label:"No current coverage"},{value:"employer",label:"Employer plan (switching)"},{value:"marketplace",label:"Marketplace / ACA plan"},{value:"other",label:"Other"}]}];case"disability":return[{field:"date_of_birth",label:"What is your date of birth?",type:"date"},{field:"occupation",label:"What is your occupation?",placeholder:"Software Engineer"},{field:"annual_income",label:"What is your annual income?",placeholder:"$85,000"},{field:"employment_status",label:"What is your employment status?",options:[{value:"employed",label:"Employed (W-2)"},{value:"self_employed",label:"Self-Employed"},{value:"business_owner",label:"Business Owner"},{value:"part_time",label:"Part-Time"}]}];case"commercial":return[{field:"business_type",label:"What type of business?",placeholder:"Restaurant, Tech Startup, etc."},{field:"annual_revenue",label:"What is your annual revenue?",placeholder:"$500,000"},{field:"num_employees",label:"How many employees?",placeholder:"12"},{field:"years_in_business",label:"How many years in business?",placeholder:"5"}];default:return[]}},[u]),d=W.length,i=W[h],x=i&&e[i.field]||"",g=h>=d-1,j=()=>{g?$():y(a=>a+1)},w=s.useCallback((a,t)=>{try{localStorage.setItem(v,JSON.stringify({form:a,step:t,savedAt:Date.now()}))}catch{}},[]),_=(a,t)=>E(p=>{const z={...p,[a]:t};return w(z,c),z}),F=()=>{localStorage.removeItem(v),B(!1),b(1),E(k)},$=async()=>{C(!0),q("");const a={};u==="vehicle"?(e.vehicle_year&&(a.vehicle_year=e.vehicle_year),e.vehicle_make&&(a.vehicle_make=e.vehicle_make),e.vehicle_model&&(a.vehicle_model=e.vehicle_model)):u==="property"?(e.home_value&&(a.home_value=e.home_value),e.year_built&&(a.year_built=e.year_built),e.square_footage&&(a.square_footage=e.square_footage)):u==="life"?(e.date_of_birth&&(a.date_of_birth=e.date_of_birth),e.smoker&&(a.smoker=e.smoker),e.coverage_amount&&(a.coverage_amount=e.coverage_amount),e.health_rating&&(a.health_rating=e.health_rating)):u==="health"?(e.date_of_birth&&(a.date_of_birth=e.date_of_birth),e.household_size&&(a.household_size=e.household_size),e.current_coverage&&(a.current_coverage=e.current_coverage)):u==="disability"?(e.date_of_birth&&(a.date_of_birth=e.date_of_birth),e.occupation&&(a.occupation=e.occupation),e.annual_income&&(a.annual_income=e.annual_income),e.employment_status&&(a.employment_status=e.employment_status)):u==="commercial"&&(e.business_type&&(a.business_type=e.business_type),e.annual_revenue&&(a.annual_revenue=e.annual_revenue),e.num_employees&&(a.num_employees=e.num_employees),e.years_in_business&&(a.years_in_business=e.years_in_business));try{const t=await Y.estimate({insurance_type:e.insurance_type,zip_code:e.zip_code,coverage_level:e.coverage_level,details:Object.keys(a).length>0?a:void 0,agency_id:m});localStorage.removeItem(v);const p={quoteRequestId:t.quote_request_id,quotes:t.quotes,insuranceType:e.insurance_type,coverageLevel:e.coverage_level,zipCode:e.zip_code,savedAt:Date.now()};try{localStorage.setItem("insurons_quote_results",JSON.stringify(p))}catch{}r("/calculator/results",{state:p})}catch(t){q(t instanceof Error?t.message:"Failed to get quotes. Please try again.")}finally{C(!1)}},U=P.flatMap(a=>a.options).find(a=>a.value===e.insurance_type)?.label||e.insurance_type;return l.jsxs("div",{className:"min-h-screen bg-slate-50",children:[l.jsx("nav",{className:"bg-white border-b border-slate-100",children:l.jsxs("div",{className:"max-w-4xl mx-auto px-6 py-4 flex items-center justify-between",children:[l.jsx("a",{href:"/",className:"flex items-center gap-2.5",children:l.jsx("img",{src:"/logo.png",alt:"Insurons",className:"h-16 w-auto"})}),l.jsxs("div",{className:"flex items-center gap-2 text-sm text-slate-500",children:[l.jsx(A,{className:"w-4 h-4 text-shield-600"}),"No login required"]})]})}),l.jsxs("div",{className:"max-w-4xl mx-auto px-6 py-12",children:[T&&l.jsxs("div",{className:"max-w-2xl mx-auto mb-6 flex items-center justify-between gap-3 px-4 py-3 rounded-xl bg-shield-50 border border-shield-200 text-sm",children:[l.jsxs("div",{className:"flex items-center gap-2 text-shield-700",children:[l.jsx(Z,{className:"w-4 h-4"}),l.jsx("span",{children:"Welcome back! We saved your progress."})]}),l.jsxs("button",{onClick:F,className:"flex items-center gap-1 text-slate-500 hover:text-slate-700",children:[l.jsx(X,{className:"w-3.5 h-3.5"}),"Start over"]})]}),l.jsx("div",{className:"flex items-center justify-center gap-3 mb-10",children:[1,2].map(a=>l.jsxs("div",{className:"flex items-center gap-3",children:[l.jsx("div",{className:`w-10 h-10 rounded-full flex items-center justify-center text-sm font-bold ${c>=a?"gradient-shield text-white":"bg-slate-200 text-slate-500"}`,children:c>a?l.jsx(G,{className:"w-5 h-5"}):a}),a<2&&l.jsx("div",{className:`w-16 h-1 rounded ${c>a?"bg-shield-500":"bg-slate-200"}`})]},a))}),l.jsxs("div",{className:"text-center mb-8",children:[l.jsxs("h1",{className:"text-3xl font-bold text-slate-900",children:[c===1&&"What type of insurance do you need?",c===2&&"Tell us about what you're insuring"]}),l.jsxs("p",{className:"text-slate-500 mt-2",children:[c===1&&"Select your coverage type and we'll find the best rates — no account needed",c===2&&"This helps us get you accurate quotes from top carriers"]}),l.jsx("p",{className:"text-xs text-slate-400 mt-1",children:"Takes about 60 seconds"})]}),l.jsx(V,{className:"max-w-2xl mx-auto",children:l.jsxs("div",{className:"p-8",children:[c===1&&l.jsxs("div",{className:"space-y-5",children:[O?l.jsx("div",{className:"text-center py-4 text-slate-500 text-sm",children:"Loading available products..."}):l.jsx(N,{label:"Insurance Type",options:[],groups:P,placeholder:"Select insurance type",value:e.insurance_type,onChange:a=>_("insurance_type",a.target.value)}),l.jsx(M,{label:"ZIP Code",placeholder:"Enter your ZIP code",value:e.zip_code,onChange:a=>_("zip_code",a.target.value),maxLength:5}),l.jsx(N,{label:"Coverage Level",options:ue,value:e.coverage_level,onChange:a=>_("coverage_level",a.target.value)}),l.jsx(S,{variant:"shield",size:"lg",className:"w-full",rightIcon:l.jsx(R,{className:"w-5 h-5"}),onClick:()=>{e.insurance_type&&e.zip_code&&(b(2),y(0),w(e,2))},disabled:!e.insurance_type||!e.zip_code,children:"Continue"})]}),c===2&&l.jsxs("div",{className:"space-y-5",children:[d>0&&l.jsxs("div",{className:"space-y-2",children:[l.jsxs("div",{className:"flex items-center justify-between text-xs text-slate-500",children:[l.jsxs("span",{children:["Question ",h+1," of ",d]}),l.jsxs("span",{children:[Math.round((h+1)/d*100),"%"]})]}),l.jsx("div",{className:"h-1.5 bg-slate-100 rounded-full overflow-hidden",children:l.jsx("div",{className:"h-full bg-shield-500 rounded-full transition-all duration-500 ease-out",style:{width:`${(h+1)/d*100}%`}})})]}),i?l.jsxs("div",{className:"animate-fade-in",children:[l.jsx("h3",{className:"text-lg font-semibold text-slate-800 mb-4",children:i.label}),i.options?l.jsx(N,{label:"",options:i.options,placeholder:"Select one...",value:x,onChange:a=>{_(i.field,a.target.value)}}):l.jsx(M,{label:"",type:i.type||"text",placeholder:i.placeholder||"",value:x,onChange:a=>_(i.field,a.target.value),onKeyDown:a=>{a.key==="Enter"&&x&&j()},autoFocus:!0})]},i.field):l.jsxs("div",{className:"text-center py-8",children:[l.jsx(ee,{className:"w-12 h-12 text-shield-400 mx-auto mb-3"}),l.jsxs("p",{className:"text-slate-600",children:["Great choice! We'll match you with the best ",U," rates in your area."]})]}),L&&l.jsx("div",{className:"p-3 rounded-lg bg-red-50 text-red-700 text-sm",children:L}),l.jsxs("div",{className:"flex gap-3",children:[l.jsx(S,{variant:"outline",size:"lg",className:"flex-1",onClick:()=>{h>0?y(a=>a-1):(b(1),w(e,1))},children:"Back"}),l.jsx(S,{variant:"shield",size:"lg",className:"flex-1",rightIcon:l.jsx(R,{className:"w-5 h-5"}),onClick:j,isLoading:H,children:g||d===0?"Get My Quotes":"Continue"})]}),!g&&d>0&&l.jsxs("p",{className:"text-center text-xs text-slate-400",children:["Press Enter to continue or ",l.jsx("button",{type:"button",onClick:j,className:"text-shield-500 hover:underline",children:"skip"})]})]})]})}),l.jsxs("div",{className:"flex items-center justify-center gap-8 mt-10 text-sm text-slate-500",children:[l.jsxs("div",{className:"flex items-center gap-2",children:[l.jsx(A,{className:"w-4 h-4 text-shield-500"}),"No login required"]}),l.jsxs("div",{className:"flex items-center gap-2",children:[l.jsx(ae,{className:"w-4 h-4 text-shield-500"}),"Results in seconds"]}),l.jsxs("div",{className:"flex items-center gap-2",children:[l.jsx(G,{className:"w-4 h-4 text-shield-500"}),"No obligation"]})]})]})]})}export{be as default};
