import{j as e}from"./vendor-query-D5ml2kdZ.js";import{e as v,r as c,L as w}from"./vendor-react-C8VcOkCS.js";import{C as i,B as o}from"./index-CyWO3JYX.js";import{B as _}from"./Badge-DV1ZXp4T.js";import{m as h}from"./marketplace-CWUGYLrO.js";import{L as p,a6 as C,S,aa as u,a3 as k,a0 as L,Q as q,a1 as Q,F as B,ad as j}from"./vendor-ui-tJ0aMxU9.js";const E=a=>a.replace(/_/g," ").replace(/\b\w/g,s=>s.toUpperCase()),n=a=>a?`$${Number(a).toLocaleString()}`:"â€”";function R(){const{token:a}=v(),[s,f]=c.useState(null),[g,N]=c.useState(!0),[b,y]=c.useState(!1),[r,d]=c.useState(!1),[l,m]=c.useState(null);c.useEffect(()=>{a&&h.viewScenario(a).then(t=>{f(t),(t.consumer_status==="accepted"||t.consumer_status==="declined")&&m(t.consumer_status)}).catch(()=>{y(!0)}).finally(()=>N(!1))},[a]);const x=async t=>{if(a){d(!0);try{await h.respondToScenario(a,t),m(t==="accept"?"accepted":"declined"),j.success(t==="accept"?"Quote accepted! Your agent will prepare the application.":"Quote declined.")}catch{j.error("Failed to respond. Please try again.")}finally{d(!1)}}};return g?e.jsx("div",{className:"min-h-screen bg-gradient-to-br from-shield-50 via-white to-confidence-50 flex items-center justify-center",children:e.jsx(p,{className:"w-8 h-8 animate-spin text-shield-400"})}):b||!s?e.jsx("div",{className:"min-h-screen bg-gradient-to-br from-shield-50 via-white to-confidence-50 flex items-center justify-center p-4",children:e.jsxs(i,{className:"max-w-md w-full p-8 text-center",children:[e.jsx(C,{className:"w-12 h-12 text-red-400 mx-auto mb-4"}),e.jsx("h1",{className:"text-xl font-bold text-slate-900 mb-2",children:"Quote Not Found"}),e.jsx("p",{className:"text-slate-500",children:"This quote link may have expired or is invalid."})]})}):e.jsxs("div",{className:"min-h-screen bg-gradient-to-br from-shield-50 via-white to-confidence-50",children:[e.jsx("div",{className:"border-b bg-white/80 backdrop-blur-sm",children:e.jsx("div",{className:"max-w-3xl mx-auto px-4 py-4 flex items-center justify-between",children:e.jsxs(w,{to:"/",className:"flex items-center gap-2",children:[e.jsx(S,{className:"w-7 h-7 text-shield-600"}),e.jsx("span",{className:"text-xl font-bold text-slate-900",children:"Insurons"})]})})}),e.jsxs("div",{className:"max-w-3xl mx-auto px-4 py-8 space-y-6",children:[l&&e.jsx(i,{className:`p-4 ${l==="accepted"?"bg-green-50 border-green-200":"bg-slate-50 border-slate-200"}`,children:e.jsxs("div",{className:"flex items-center gap-3",children:[l==="accepted"?e.jsx(u,{className:"w-6 h-6 text-green-600"}):e.jsx(k,{className:"w-6 h-6 text-slate-500"}),e.jsxs("div",{children:[e.jsx("p",{className:"font-semibold text-slate-900",children:l==="accepted"?"You accepted this quote":"You declined this quote"}),e.jsx("p",{className:"text-sm text-slate-500",children:l==="accepted"?"Your agent will prepare the application for signing. Check your email.":"This quote has been declined. You can continue reviewing other options."})]})]})}),e.jsxs(i,{className:"p-6",children:[e.jsxs("div",{className:"flex items-start justify-between mb-4",children:[e.jsxs("div",{children:[e.jsx("h1",{className:"text-2xl font-bold text-slate-900",children:s.scenario_name}),e.jsxs("p",{className:"text-slate-500 mt-1",children:[s.product_type.replace(/_/g," ").replace(/\b\w/g,t=>t.toUpperCase())," Quote"]})]}),e.jsx(_,{variant:s.consumer_status==="accepted"?"success":s.consumer_status==="declined"?"default":"info",children:s.consumer_status.charAt(0).toUpperCase()+s.consumer_status.slice(1)})]}),e.jsxs("div",{className:"flex items-center gap-6 p-4 bg-slate-50 rounded-lg",children:[s.agent&&e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(L,{className:"w-4 h-4 text-slate-400"}),e.jsx("span",{className:"text-sm font-medium text-slate-900",children:s.agent.name})]}),s.lead?.agency&&e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(q,{className:"w-4 h-4 text-slate-400"}),e.jsx("span",{className:"text-sm text-slate-600",children:s.lead.agency.name}),s.lead.agency.city&&s.lead.agency.state&&e.jsxs("span",{className:"text-xs text-slate-400",children:["(",s.lead.agency.city,", ",s.lead.agency.state,")"]})]})]}),(s.best_quoted_premium||s.target_premium_monthly)&&e.jsxs("div",{className:"mt-4 p-4 bg-savings-50 rounded-lg text-center",children:[e.jsx("p",{className:"text-sm text-savings-600 font-medium",children:"Estimated Monthly Premium"}),e.jsxs("p",{className:"text-3xl font-bold text-savings-700 mt-1",children:[n(s.best_quoted_premium||s.target_premium_monthly),e.jsx("span",{className:"text-lg font-normal",children:"/mo"})]})]})]}),s.coverages.length>0&&e.jsxs(i,{className:"p-6",children:[e.jsxs("div",{className:"flex items-center gap-2 mb-4",children:[e.jsx(Q,{className:"w-5 h-5 text-shield-600"}),e.jsx("h2",{className:"text-lg font-semibold text-slate-900",children:"Coverage Details"})]}),e.jsx("div",{className:"space-y-2",children:s.coverages.filter(t=>t.is_included).map(t=>e.jsxs("div",{className:"flex items-center justify-between py-2.5 border-b border-slate-100 last:border-0",children:[e.jsxs("div",{children:[e.jsx("p",{className:"text-sm font-medium text-slate-900",children:E(t.coverage_type)}),e.jsx("p",{className:"text-xs text-slate-400",children:t.coverage_category})]}),e.jsxs("div",{className:"text-right",children:[t.limit_amount&&e.jsxs("p",{className:"text-sm font-medium text-slate-900",children:[n(t.limit_amount)," limit"]}),t.deductible_amount&&e.jsxs("p",{className:"text-xs text-slate-500",children:[n(t.deductible_amount)," deductible"]}),t.benefit_amount&&e.jsxs("p",{className:"text-sm font-medium text-slate-900",children:[n(t.benefit_amount)," benefit"]})]})]},t.id))})]}),s.insured_objects&&s.insured_objects.length>0&&e.jsxs(i,{className:"p-6",children:[e.jsxs("div",{className:"flex items-center gap-2 mb-4",children:[e.jsx(B,{className:"w-5 h-5 text-shield-600"}),e.jsx("h2",{className:"text-lg font-semibold text-slate-900",children:"Insured Items"})]}),e.jsx("div",{className:"space-y-2",children:s.insured_objects.map(t=>e.jsxs("div",{className:"flex items-center justify-between py-2 border-b border-slate-100 last:border-0",children:[e.jsx("span",{className:"text-sm font-medium text-slate-900",children:t.name}),e.jsxs("span",{className:"text-xs text-slate-500",children:[t.object_type," ",t.relationship?`(${t.relationship})`:""]})]},t.id))})]}),s.notes&&e.jsxs(i,{className:"p-6",children:[e.jsx("h2",{className:"text-lg font-semibold text-slate-900 mb-2",children:"Agent Notes"}),e.jsx("p",{className:"text-sm text-slate-600 whitespace-pre-wrap",children:s.notes})]}),!l&&e.jsxs("div",{className:"flex gap-3",children:[e.jsx(o,{variant:"shield",className:"flex-1",onClick:()=>x("accept"),disabled:r,leftIcon:r?e.jsx(p,{className:"w-4 h-4 animate-spin"}):e.jsx(u,{className:"w-4 h-4"}),children:"Accept This Quote"}),e.jsx(o,{variant:"outline",className:"flex-1",onClick:()=>x("decline"),disabled:r,children:"Decline"})]})]})]})}export{R as default};
