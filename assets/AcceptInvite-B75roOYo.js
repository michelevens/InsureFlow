import{j as e}from"./vendor-query-D5ml2kdZ.js";import{e as E,u as k,r as t}from"./vendor-react-C8VcOkCS.js";import{u as P,b as f,B as p,I as i}from"./index-8sQqf4Gi.js";import{E as j,u as _,a0 as A,_ as v}from"./vendor-ui-tJ0aMxU9.js";function F(){const{token:r}=E(),m=k(),{refreshUser:b}=P(),[a,g]=t.useState(null),[N,u]=t.useState(!0),[w,x]=t.useState(!1),[o,l]=t.useState(""),[h,y]=t.useState(""),[c,I]=t.useState(""),[d,S]=t.useState("");t.useEffect(()=>{r&&f.get(`/invites/${r}`).then(s=>{g(s),u(!1)}).catch(s=>{l(s instanceof Error?s.message:"Invalid or expired invite"),u(!1)})},[r]);const C=async s=>{if(s.preventDefault(),c!==d){l("Passwords do not match");return}l(""),x(!0);try{const n=await f.post(`/invites/${r}/accept`,{name:h,password:c,password_confirmation:d});localStorage.setItem("auth_token",n.token),await b(),m("/dashboard")}catch(n){l(n instanceof Error?n.message:"Failed to accept invite")}finally{x(!1)}};return N?e.jsx("div",{className:"min-h-screen bg-slate-50 flex items-center justify-center",children:e.jsx("div",{className:"w-8 h-8 border-4 border-teal-200 border-t-teal-600 rounded-full animate-spin"})}):a?e.jsx("div",{className:"min-h-screen bg-slate-50 flex items-center justify-center px-4",children:e.jsxs("div",{className:"w-full max-w-md",children:[e.jsxs("div",{className:"text-center mb-8",children:[e.jsx("img",{src:"/logo.png",alt:"Insurons",className:"h-20 w-auto mx-auto mb-4"}),e.jsxs("h1",{className:"text-2xl font-bold text-slate-900",children:["Join ",a.agency_name]}),e.jsxs("p",{className:"text-slate-500 mt-1",children:["You've been invited as ",e.jsx("span",{className:"font-semibold text-teal-700",children:a.role})]})]}),e.jsxs("div",{className:"bg-white rounded-2xl border border-slate-200 p-8",children:[e.jsxs("div",{className:"flex items-center gap-3 p-4 bg-teal-50 rounded-xl border border-teal-100 mb-6",children:[e.jsx(_,{className:"w-5 h-5 text-teal-600 shrink-0"}),e.jsxs("div",{children:[e.jsxs("p",{className:"text-sm font-medium text-teal-900",children:[a.inviter_name," invited you"]}),e.jsxs("p",{className:"text-xs text-teal-600",children:["to join ",a.agency_name]})]})]}),e.jsxs("form",{onSubmit:C,className:"space-y-5",children:[o&&e.jsx("div",{className:"p-3 rounded-xl bg-red-50 text-red-600 text-sm",children:o}),e.jsx(i,{label:"Email",type:"email",value:a.email,disabled:!0,leftIcon:e.jsx(j,{className:"w-5 h-5"})}),e.jsx(i,{label:"Full Name",type:"text",placeholder:"Your full name",value:h,onChange:s=>y(s.target.value),leftIcon:e.jsx(A,{className:"w-5 h-5"}),required:!0}),e.jsx(i,{label:"Password",type:"password",placeholder:"Create a password",value:c,onChange:s=>I(s.target.value),leftIcon:e.jsx(v,{className:"w-5 h-5"}),required:!0}),e.jsx(i,{label:"Confirm Password",type:"password",placeholder:"Confirm your password",value:d,onChange:s=>S(s.target.value),leftIcon:e.jsx(v,{className:"w-5 h-5"}),required:!0}),e.jsx(p,{type:"submit",variant:"shield",size:"lg",className:"w-full",isLoading:w,children:"Accept & Create Account"})]})]})]})}):e.jsx("div",{className:"min-h-screen bg-slate-50 flex items-center justify-center px-4",children:e.jsx("div",{className:"w-full max-w-md text-center",children:e.jsxs("div",{className:"bg-white rounded-2xl border border-slate-200 p-8",children:[e.jsx("div",{className:"w-12 h-12 bg-red-100 rounded-full flex items-center justify-center mx-auto mb-4",children:e.jsx(j,{className:"w-6 h-6 text-red-500"})}),e.jsx("h1",{className:"text-xl font-bold text-slate-900",children:"Invalid Invitation"}),e.jsx("p",{className:"text-red-600 mt-2",children:o}),e.jsx(p,{variant:"shield",className:"mt-6",onClick:()=>m("/login"),children:"Go to Login"})]})})})}export{F as default};
