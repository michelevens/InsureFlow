import{j as e}from"./vendor-query-D5ml2kdZ.js";import{r as t}from"./vendor-react-C8VcOkCS.js";import{C as a,B as i}from"./index-BZEM9EbM.js";import{B as j}from"./Badge-8fS5vckW.js";import{E as f}from"./EmptyState-rQALulEo.js";import{p}from"./policies-sx9zuulL.js";import{L as u,S as l,D as v,m as d,ar as N,Y as g,F as b}from"./vendor-ui-tJ0aMxU9.js";function z(){const[r,o]=t.useState([]),[h,n]=t.useState(!0),[c,x]=t.useState("");t.useEffect(()=>{m()},[]);const m=async()=>{try{n(!0),x("");const s=await p.list();o(s.items)}catch(s){x(s instanceof Error?s.message:"Failed to load policies")}finally{n(!1)}};return h?e.jsxs("div",{children:[e.jsx("h1",{className:"text-2xl font-bold text-slate-900 mb-6",children:"My Policies"}),e.jsxs(a,{className:"p-12 text-center",children:[e.jsx(u,{className:"w-8 h-8 animate-spin text-shield-500 mx-auto"}),e.jsx("p",{className:"text-slate-500 mt-2",children:"Loading your policies..."})]})]}):c?e.jsxs("div",{children:[e.jsx("h1",{className:"text-2xl font-bold text-slate-900 mb-6",children:"My Policies"}),e.jsxs(a,{className:"p-6 text-center",children:[e.jsx("p",{className:"text-red-500",children:c}),e.jsx(i,{variant:"outline",size:"sm",className:"mt-2",onClick:m,children:"Retry"})]})]}):r.length===0?e.jsxs("div",{children:[e.jsx("h1",{className:"text-2xl font-bold text-slate-900 mb-6",children:"My Policies"}),e.jsx(a,{children:e.jsx(f,{icon:e.jsx(l,{className:"w-8 h-8"}),title:"No active policies",description:"Once your application is approved, your active policies will appear here",actionLabel:"Get a Quote",onAction:()=>window.location.href="/calculator"})})]}):e.jsxs("div",{className:"space-y-6",children:[e.jsxs("div",{children:[e.jsx("h1",{className:"text-2xl font-bold text-slate-900",children:"My Policies"}),e.jsx("p",{className:"text-slate-500 mt-1",children:"View and manage your active insurance policies"})]}),e.jsx("div",{className:"space-y-4",children:r.map(s=>e.jsx(a,{children:e.jsxs("div",{className:"p-6",children:[e.jsxs("div",{className:"flex items-center justify-between mb-4",children:[e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx("div",{className:"w-12 h-12 rounded-2xl bg-savings-100 text-savings-600 flex items-center justify-center",children:e.jsx(l,{className:"w-6 h-6"})}),e.jsxs("div",{children:[e.jsx("h3",{className:"font-semibold text-slate-900 capitalize",children:(s.type||"").replace(/_/g," ")}),e.jsxs("p",{className:"text-sm text-slate-500",children:[s.carrier_name," Â· ",s.policy_number]})]})]}),e.jsx(j,{variant:s.status==="active"?"success":s.status==="expiring_soon"?"warning":"danger",children:s.status==="active"?"Active":s.status==="expiring_soon"?"Expiring Soon":"Expired"})]}),e.jsxs("div",{className:"grid grid-cols-2 md:grid-cols-4 gap-4 mb-4",children:[e.jsxs("div",{children:[e.jsxs("div",{className:"flex items-center gap-1 text-xs text-slate-500 mb-1",children:[e.jsx(v,{className:"w-3.5 h-3.5"})," Premium"]}),e.jsxs("p",{className:"text-sm font-medium text-slate-900",children:["$",s.monthly_premium,"/mo"]})]}),e.jsxs("div",{children:[e.jsxs("div",{className:"flex items-center gap-1 text-xs text-slate-500 mb-1",children:[e.jsx(l,{className:"w-3.5 h-3.5"})," Coverage"]}),e.jsx("p",{className:"text-sm font-medium text-slate-900",children:s.coverage_limit||"-"})]}),e.jsxs("div",{children:[e.jsxs("div",{className:"flex items-center gap-1 text-xs text-slate-500 mb-1",children:[e.jsx(d,{className:"w-3.5 h-3.5"})," Effective"]}),e.jsx("p",{className:"text-sm font-medium text-slate-900",children:s.effective_date})]}),e.jsxs("div",{children:[e.jsxs("div",{className:"flex items-center gap-1 text-xs text-slate-500 mb-1",children:[e.jsx(d,{className:"w-3.5 h-3.5"})," Expires"]}),e.jsx("p",{className:"text-sm font-medium text-slate-900",children:s.expiration_date})]})]}),e.jsxs("div",{className:"flex items-center justify-between pt-4 border-t border-slate-100",children:[e.jsx("div",{className:"flex items-center gap-2 text-sm text-slate-600",children:s.agent&&e.jsxs("span",{children:["Agent: ",e.jsxs("span",{className:"font-medium text-slate-900",children:[s.agent.first_name," ",s.agent.last_name]})]})}),e.jsxs("div",{className:"flex gap-2",children:[e.jsx(i,{variant:"outline",size:"sm",leftIcon:e.jsx(N,{className:"w-4 h-4"}),children:"Call Agent"}),e.jsx(i,{variant:"outline",size:"sm",leftIcon:e.jsx(g,{className:"w-4 h-4"}),children:"Download"}),e.jsx(i,{variant:"outline",size:"sm",leftIcon:e.jsx(b,{className:"w-4 h-4"}),children:"File Claim"})]})]})]})},s.id))})]})}export{z as default};
