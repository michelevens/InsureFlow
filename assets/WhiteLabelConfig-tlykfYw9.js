import{j as e}from"./vendor-query-D5ml2kdZ.js";import{r as t}from"./vendor-react-C8VcOkCS.js";import{b as p,B as n,C as S,I as b}from"./index-8sQqf4Gi.js";import{B as _}from"./Badge-CDix051U.js";import{M as k}from"./Modal-UQye4ZSv.js";import{ax as A,J as B,ai as L,a2 as E,aY as T,d as P,a5 as U}from"./vendor-ui-tJ0aMxU9.js";const C={async list(){return p.get("/white-label")},async create(a){return p.post("/white-label",a)},async show(a){return p.get(`/white-label/${a}`)},async update(a,m){return p.put(`/white-label/${a}`,m)},async remove(a){return p.delete(`/white-label/${a}`)},async addDomain(a,m){return p.post(`/white-label/${a}/domains`,{domain:m})},async verifyDomain(a){return p.post(`/white-label/domains/${a}/verify`,{})},async removeDomain(a){return p.delete(`/white-label/domains/${a}`)},async preview(a){return p.get(`/white-label/${a}/preview`)}},$={active:{label:"Active",variant:"success"},provisioning:{label:"Provisioning",variant:"info"},pending:{label:"Pending",variant:"warning"},failed:{label:"Failed",variant:"danger"}};function G(){const[a,m]=t.useState([]),[x,N]=t.useState(!0),[h,c]=t.useState(!1),[i,d]=t.useState(null),[v,j]=t.useState(null),[g,u]=t.useState(""),o=async()=>{N(!0);try{const s=await C.list();m(s)}catch{}finally{N(!1)}};t.useEffect(()=>{o()},[]);const l=async s=>{await C.update(s.id,{is_active:!s.is_active}),o()},f=async s=>{await C.remove(s),i?.id===s&&d(null),o()},w=async()=>{!v||!g||(await C.addDomain(v,g),j(null),u(""),o())},r=async s=>{await C.verifyDomain(s),o()},z=async s=>{await C.removeDomain(s),o()};return e.jsxs("div",{className:"space-y-6",children:[e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsx("h1",{className:"text-2xl font-bold text-slate-900",children:"White-Label"}),e.jsx("p",{className:"text-slate-500 mt-1",children:"Brand the consumer experience for your agency"})]}),e.jsxs(n,{variant:"shield",onClick:()=>c(!0),children:[e.jsx(A,{className:"w-4 h-4 mr-1"})," New Configuration"]})]}),x?e.jsx(S,{className:"p-8 text-center",children:e.jsx("div",{className:"w-8 h-8 border-4 border-shield-200 border-t-shield-600 rounded-full animate-spin mx-auto"})}):a.length===0?e.jsxs(S,{className:"p-12 text-center",children:[e.jsx(B,{className:"w-12 h-12 text-slate-300 mx-auto mb-3"}),e.jsx("p",{className:"text-slate-500 mb-4",children:"No white-label configurations yet"}),e.jsxs(n,{variant:"shield",onClick:()=>c(!0),children:[e.jsx(A,{className:"w-4 h-4 mr-1"})," Create First Config"]})]}):e.jsx("div",{className:"grid grid-cols-1 lg:grid-cols-2 gap-4",children:a.map(s=>e.jsxs(S,{className:"p-5",children:[e.jsxs("div",{className:"flex items-start justify-between mb-3",children:[e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx("div",{className:"w-10 h-10 rounded-xl flex items-center justify-center text-white font-bold",style:{background:`linear-gradient(135deg, ${s.primary_color}, ${s.secondary_color})`},children:s.brand_name.charAt(0)}),e.jsxs("div",{children:[e.jsx("h3",{className:"font-bold text-slate-900",children:s.brand_name}),e.jsx("p",{className:"text-xs text-slate-500",children:s.agency?.name||s.organization?.name})]})]}),e.jsx("div",{className:"flex items-center gap-2",children:s.is_active?e.jsx(_,{variant:"success",children:"Active"}):e.jsx(_,{variant:"default",children:"Inactive"})})]}),e.jsxs("div",{className:"flex items-center gap-2 mb-3",children:[e.jsx("div",{className:"w-6 h-6 rounded-full border border-slate-200",style:{backgroundColor:s.primary_color},title:"Primary"}),e.jsx("div",{className:"w-6 h-6 rounded-full border border-slate-200",style:{backgroundColor:s.secondary_color},title:"Secondary"}),e.jsxs("span",{className:"text-xs text-slate-400 ml-1",children:[s.primary_color," / ",s.secondary_color]})]}),s.domains&&s.domains.length>0&&e.jsx("div",{className:"space-y-1.5 mb-3",children:s.domains.map(y=>{const D=$[y.ssl_status]||$.pending;return e.jsxs("div",{className:"flex items-center justify-between bg-slate-50 rounded-lg px-3 py-2 text-sm",children:[e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(L,{className:"w-3.5 h-3.5 text-slate-400"}),e.jsx("span",{className:"font-mono",children:y.domain}),e.jsx(_,{variant:D.variant,children:D.label})]}),e.jsxs("div",{className:"flex items-center gap-1",children:[y.ssl_status==="pending"&&e.jsx(n,{variant:"ghost",size:"sm",onClick:()=>r(y.id),title:"Verify",children:e.jsx(E,{className:"w-3.5 h-3.5"})}),y.txt_record&&e.jsx("button",{onClick:()=>navigator.clipboard.writeText(y.txt_record),className:"text-slate-400 hover:text-slate-600",title:"Copy TXT record",children:e.jsx(T,{className:"w-3.5 h-3.5"})}),e.jsx(n,{variant:"ghost",size:"sm",onClick:()=>z(y.id),children:e.jsx(P,{className:"w-3.5 h-3.5 text-red-400"})})]})]},y.id)})}),e.jsxs("div",{className:"flex items-center gap-2 pt-2 border-t border-slate-100",children:[e.jsx(n,{variant:"ghost",size:"sm",onClick:()=>l(s),children:s.is_active?"Deactivate":"Activate"}),e.jsxs(n,{variant:"ghost",size:"sm",onClick:()=>j(s.id),children:[e.jsx(L,{className:"w-3.5 h-3.5 mr-1"})," Add Domain"]}),e.jsxs(n,{variant:"ghost",size:"sm",onClick:()=>d(s),children:[e.jsx(U,{className:"w-3.5 h-3.5 mr-1"})," Edit"]}),e.jsx(n,{variant:"ghost",size:"sm",onClick:()=>f(s.id),children:e.jsx(P,{className:"w-3.5 h-3.5 text-red-400"})})]})]},s.id))}),h&&e.jsx(W,{onClose:()=>c(!1),onCreated:()=>{o(),c(!1)}}),i&&e.jsx(M,{config:i,onClose:()=>d(null),onSaved:()=>{o(),d(null)}}),v&&e.jsx(k,{isOpen:!0,onClose:()=>{j(null),u("")},title:"Add Custom Domain",size:"sm",children:e.jsxs("div",{className:"space-y-4",children:[e.jsx(b,{label:"Domain",placeholder:"insurance.youragency.com",value:g,onChange:s=>u(s.target.value)}),e.jsxs("p",{className:"text-xs text-slate-500",children:["After adding, create a CNAME record pointing to ",e.jsx("code",{className:"bg-slate-100 px-1 rounded",children:"app.insurons.com"})," and add the TXT verification record."]}),e.jsxs("div",{className:"flex justify-end gap-2",children:[e.jsx(n,{variant:"ghost",onClick:()=>{j(null),u("")},children:"Cancel"}),e.jsx(n,{variant:"shield",onClick:w,disabled:!g,children:"Add Domain"})]})]})})]})}function W({onClose:a,onCreated:m}){const[x,N]=t.useState(""),[h,c]=t.useState("#1e40af"),[i,d]=t.useState("#f59e0b"),[v,j]=t.useState(""),[g,u]=t.useState(!1),o=async()=>{if(x){u(!0);try{await C.create({brand_name:x,primary_color:h,secondary_color:i,logo_url:v||void 0}),m()}catch{}finally{u(!1)}}};return e.jsx(k,{isOpen:!0,onClose:a,title:"New White-Label Config",size:"md",children:e.jsxs("div",{className:"space-y-4",children:[e.jsx(b,{label:"Brand Name",placeholder:"Your Agency Name",value:x,onChange:l=>N(l.target.value)}),e.jsx(b,{label:"Logo URL",placeholder:"https://...",value:v,onChange:l=>j(l.target.value)}),e.jsxs("div",{className:"grid grid-cols-2 gap-3",children:[e.jsxs("div",{children:[e.jsx("label",{className:"text-sm font-medium text-slate-700 block mb-1",children:"Primary Color"}),e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("input",{type:"color",value:h,onChange:l=>c(l.target.value),className:"w-10 h-10 rounded cursor-pointer"}),e.jsx(b,{value:h,onChange:l=>c(l.target.value)})]})]}),e.jsxs("div",{children:[e.jsx("label",{className:"text-sm font-medium text-slate-700 block mb-1",children:"Secondary Color"}),e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("input",{type:"color",value:i,onChange:l=>d(l.target.value),className:"w-10 h-10 rounded cursor-pointer"}),e.jsx(b,{value:i,onChange:l=>d(l.target.value)})]})]})]}),e.jsxs("div",{className:"rounded-xl p-4 border border-slate-200",style:{background:`linear-gradient(135deg, ${h}10, ${i}10)`},children:[e.jsxs("div",{className:"flex items-center gap-2 mb-2",children:[e.jsx("div",{className:"w-8 h-8 rounded-lg flex items-center justify-center text-white font-bold text-sm",style:{backgroundColor:h},children:x.charAt(0)||"?"}),e.jsx("span",{className:"font-bold",style:{color:h},children:x||"Preview"})]}),e.jsx("div",{className:"h-2 rounded-full",style:{backgroundColor:i,width:"60%"}})]}),e.jsxs("div",{className:"flex justify-end gap-2 pt-2",children:[e.jsx(n,{variant:"ghost",onClick:a,children:"Cancel"}),e.jsx(n,{variant:"shield",onClick:o,disabled:g||!x,children:g?"Creating...":"Create"})]})]})})}function M({config:a,onClose:m,onSaved:x}){const[N,h]=t.useState(a.brand_name),[c,i]=t.useState(a.primary_color),[d,v]=t.useState(a.secondary_color),[j,g]=t.useState(a.logo_url||""),[u,o]=t.useState(a.custom_css||""),[l,f]=t.useState(!1),w=async()=>{f(!0);try{await C.update(a.id,{brand_name:N,primary_color:c,secondary_color:d,logo_url:j||null,custom_css:u||null}),x()}catch{}finally{f(!1)}};return e.jsx(k,{isOpen:!0,onClose:m,title:"Edit White-Label",size:"md",children:e.jsxs("div",{className:"space-y-4",children:[e.jsx(b,{label:"Brand Name",value:N,onChange:r=>h(r.target.value)}),e.jsx(b,{label:"Logo URL",value:j,onChange:r=>g(r.target.value)}),e.jsxs("div",{className:"grid grid-cols-2 gap-3",children:[e.jsxs("div",{children:[e.jsx("label",{className:"text-sm font-medium text-slate-700 block mb-1",children:"Primary Color"}),e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("input",{type:"color",value:c,onChange:r=>i(r.target.value),className:"w-10 h-10 rounded cursor-pointer"}),e.jsx(b,{value:c,onChange:r=>i(r.target.value)})]})]}),e.jsxs("div",{children:[e.jsx("label",{className:"text-sm font-medium text-slate-700 block mb-1",children:"Secondary Color"}),e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("input",{type:"color",value:d,onChange:r=>v(r.target.value),className:"w-10 h-10 rounded cursor-pointer"}),e.jsx(b,{value:d,onChange:r=>v(r.target.value)})]})]})]}),e.jsxs("div",{children:[e.jsx("label",{className:"text-sm font-medium text-slate-700 block mb-1",children:"Custom CSS"}),e.jsx("textarea",{value:u,onChange:r=>o(r.target.value),className:"w-full h-24 text-sm font-mono border border-slate-200 rounded-lg p-3 focus:ring-2 focus:ring-shield-500 focus:border-shield-500",placeholder:".header { background: #fff; }"})]}),e.jsxs("div",{className:"flex justify-end gap-2 pt-2",children:[e.jsx(n,{variant:"ghost",onClick:m,children:"Cancel"}),e.jsx(n,{variant:"shield",onClick:w,disabled:l,children:l?"Saving...":"Save Changes"})]})]})})}export{G as default};
