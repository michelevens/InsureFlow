import{j as e}from"./vendor-query-D5ml2kdZ.js";import{r,L as b}from"./vendor-react-C8VcOkCS.js";import{r as o}from"./rateTableAdmin-B4nKa6uP.js";import{L as P,ax as D,I as F,a2 as E,a3 as M,ae as $,ap as j,a5 as I,aY as O,aJ as Y,d as B,ad as i}from"./vendor-ui-tJ0aMxU9.js";import"./index-BZEM9EbM.js";const p=["All","LTC","LTD","Life","P&C","Annuity"],U={LTC:"bg-blue-50 text-blue-700",LTD:"bg-purple-50 text-purple-700",Life:"bg-emerald-50 text-emerald-700","P&C":"bg-amber-50 text-amber-700",Annuity:"bg-rose-50 text-rose-700"};function V(l){const x=p.find(a=>a.toLowerCase()===l.toLowerCase()||l.toLowerCase().includes(a.toLowerCase()));return U[x??""]??"bg-slate-100 text-slate-600"}function g(l){return p.find(a=>a.toLowerCase()===l.toLowerCase()||l.toLowerCase().includes(a.toLowerCase()))??l}function H(){const[l,x]=r.useState([]),[a,N]=r.useState({total:0,active:0,ltc:0,ltd:0}),[v,w]=r.useState([]),[y,f]=r.useState(!0),[c,C]=r.useState("All"),[n,L]=r.useState(""),[d,T]=r.useState(""),m=async()=>{f(!0);try{const[t,s]=await Promise.all([o.list(),o.getCarriers()]);x(t.rate_tables),N(t.counts),w(s)}catch{i.error("Failed to load rate tables")}finally{f(!1)}};r.useEffect(()=>{m()},[]);const h=r.useMemo(()=>l.filter(t=>{if(c!=="All"&&g(t.product_type)!==c||n&&t.carrier_id!==Number(n))return!1;if(d){const s=d.toLowerCase(),u=(t.name??t.product_type).toLowerCase().includes(s),_=(t.carrier?.name??"").toLowerCase().includes(s),A=t.version.toLowerCase().includes(s);if(!u&&!_&&!A)return!1}return!0}),[l,c,n,d]),S=async(t,s)=>{try{await o.clone(t),i.success(`Cloned "${s}" successfully`),m()}catch{i.error("Failed to clone rate table")}},k=async t=>{try{await o.toggleStatus(t.id),i.success(t.is_active?"Rate table deactivated":"Rate table activated"),m()}catch{i.error("Failed to update rate table status")}},R=async(t,s)=>{if(confirm(`Delete "${s}"? This cannot be undone.`))try{await o.delete(t),i.success("Rate table deleted"),m()}catch{i.error("Failed to delete rate table")}};return y?e.jsxs("div",{className:"space-y-6",children:[e.jsxs("div",{children:[e.jsx("h1",{className:"text-2xl font-bold text-slate-900",children:"Rate Tables"}),e.jsx("p",{className:"text-slate-500 mt-1",children:"Manage carrier rating tables and pricing data"})]}),e.jsxs("div",{className:"bg-white rounded-xl border border-slate-200 p-16 flex flex-col items-center justify-center gap-3",children:[e.jsx(P,{className:"w-6 h-6 text-shield-600 animate-spin"}),e.jsx("p",{className:"text-sm text-slate-500",children:"Loading rate tables..."})]})]}):e.jsxs("div",{className:"space-y-6",children:[e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsx("h1",{className:"text-2xl font-bold text-slate-900",children:"Rate Tables"}),e.jsx("p",{className:"text-slate-500 mt-1",children:"Manage carrier rating tables and pricing data"})]}),e.jsxs(b,{to:"/admin/rate-tables/new",className:"flex items-center gap-2 px-4 py-2 bg-shield-600 text-white rounded-lg hover:bg-shield-700 transition-colors text-sm font-medium",children:[e.jsx(D,{className:"w-4 h-4"}),"Create Rate Table"]})]}),e.jsxs("div",{className:"grid grid-cols-3 gap-4",children:[e.jsxs("div",{className:"bg-white rounded-xl border border-slate-200 p-4 flex items-center gap-3",children:[e.jsx("div",{className:"w-10 h-10 rounded-lg bg-shield-50 flex items-center justify-center flex-shrink-0",children:e.jsx(F,{className:"w-5 h-5 text-shield-600"})}),e.jsxs("div",{children:[e.jsx("p",{className:"text-xl font-bold text-slate-900",children:a.total}),e.jsx("p",{className:"text-sm text-slate-500",children:"Total Tables"})]})]}),e.jsxs("div",{className:"bg-white rounded-xl border border-slate-200 p-4 flex items-center gap-3",children:[e.jsx("div",{className:"w-10 h-10 rounded-lg bg-emerald-50 flex items-center justify-center flex-shrink-0",children:e.jsx(E,{className:"w-5 h-5 text-emerald-600"})}),e.jsxs("div",{children:[e.jsx("p",{className:"text-xl font-bold text-slate-900",children:a.active}),e.jsx("p",{className:"text-sm text-slate-500",children:"Active"})]})]}),e.jsxs("div",{className:"bg-white rounded-xl border border-slate-200 p-4 flex items-center gap-3",children:[e.jsx("div",{className:"w-10 h-10 rounded-lg bg-red-50 flex items-center justify-center flex-shrink-0",children:e.jsx(M,{className:"w-5 h-5 text-red-500"})}),e.jsxs("div",{children:[e.jsx("p",{className:"text-xl font-bold text-slate-900",children:a.total-a.active}),e.jsx("p",{className:"text-sm text-slate-500",children:"Inactive"})]})]})]}),e.jsxs("div",{className:"flex flex-col sm:flex-row gap-3",children:[e.jsx("div",{className:"bg-slate-100 rounded-lg p-1 flex gap-1 flex-wrap",children:p.map(t=>e.jsx("button",{onClick:()=>C(t),className:`px-3 py-1.5 rounded-md text-sm font-medium transition-colors ${c===t?"bg-white shadow-sm text-slate-900":"text-slate-600 hover:text-slate-900"}`,children:t},t))}),e.jsxs("select",{value:n,onChange:t=>L(t.target.value),className:"px-3 py-2 border border-slate-200 rounded-lg text-sm focus:ring-2 focus:ring-shield-500 focus:border-shield-500 bg-white",children:[e.jsx("option",{value:"",children:"All Carriers"}),v.map(t=>e.jsx("option",{value:t.id,children:t.name},t.id))]}),e.jsxs("div",{className:"relative flex-1 min-w-48",children:[e.jsx($,{className:"absolute left-3 top-1/2 -translate-y-1/2 w-4 h-4 text-slate-400 pointer-events-none"}),e.jsx("input",{type:"text",placeholder:"Search tables...",value:d,onChange:t=>T(t.target.value),className:"w-full pl-9 pr-4 py-2 border border-slate-200 rounded-lg text-sm focus:ring-2 focus:ring-shield-500 focus:border-shield-500"})]})]}),e.jsx("div",{className:"bg-white rounded-xl border border-slate-200 overflow-hidden",children:h.length===0?e.jsxs("div",{className:"flex flex-col items-center justify-center py-20 text-slate-500",children:[e.jsx(j,{className:"w-10 h-10 mb-3 text-slate-300"}),e.jsx("p",{className:"font-medium text-slate-700",children:"No rate tables found"}),e.jsx("p",{className:"text-sm mt-1",children:d||c!=="All"||n?"Try adjusting your filters":"Create your first rate table to get started"})]}):e.jsxs("div",{className:"overflow-x-auto",children:[e.jsxs("table",{className:"w-full text-sm",children:[e.jsx("thead",{children:e.jsxs("tr",{className:"border-b border-slate-100 bg-slate-50",children:[e.jsx("th",{className:"text-left text-xs font-medium text-slate-500 uppercase tracking-wider px-4 py-3",children:"Name"}),e.jsx("th",{className:"text-left text-xs font-medium text-slate-500 uppercase tracking-wider px-4 py-3",children:"Product Type"}),e.jsx("th",{className:"text-left text-xs font-medium text-slate-500 uppercase tracking-wider px-4 py-3",children:"Version"}),e.jsx("th",{className:"text-left text-xs font-medium text-slate-500 uppercase tracking-wider px-4 py-3",children:"Entries"}),e.jsx("th",{className:"text-left text-xs font-medium text-slate-500 uppercase tracking-wider px-4 py-3",children:"Status"}),e.jsx("th",{className:"text-right text-xs font-medium text-slate-500 uppercase tracking-wider px-4 py-3",children:"Actions"})]})}),e.jsx("tbody",{className:"divide-y divide-slate-50",children:h.map(t=>{const s=t.name??t.product_type,u=g(t.product_type);return e.jsxs("tr",{className:"hover:bg-slate-50 transition-colors",children:[e.jsx("td",{className:"px-4 py-3",children:e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx("div",{className:"w-8 h-8 rounded-lg bg-shield-50 flex items-center justify-center flex-shrink-0",children:e.jsx(j,{className:"w-4 h-4 text-shield-600"})}),e.jsxs("div",{children:[e.jsx("p",{className:"font-medium text-slate-900",children:s}),t.carrier?.name&&e.jsx("p",{className:"text-xs text-slate-400",children:t.carrier.name})]})]})}),e.jsx("td",{className:"px-4 py-3",children:e.jsx("span",{className:`px-2 py-0.5 rounded-full text-xs font-medium ${V(t.product_type)}`,children:u})}),e.jsx("td",{className:"px-4 py-3",children:e.jsx("span",{className:"font-mono text-xs text-slate-600 bg-slate-100 px-2 py-0.5 rounded",children:t.version})}),e.jsx("td",{className:"px-4 py-3",children:e.jsx("span",{className:"text-slate-700",children:t.entries_count.toLocaleString()})}),e.jsx("td",{className:"px-4 py-3",children:t.is_active?e.jsx("span",{className:"px-2 py-0.5 rounded-full text-xs font-medium bg-emerald-50 text-emerald-700",children:"Active"}):e.jsx("span",{className:"px-2 py-0.5 rounded-full text-xs font-medium bg-red-50 text-red-600",children:"Inactive"})}),e.jsx("td",{className:"px-4 py-3",children:e.jsxs("div",{className:"flex items-center justify-end gap-1",children:[e.jsx(b,{to:`/admin/rate-tables/${t.id}`,className:"p-1.5 rounded-md text-slate-500 hover:text-shield-600 hover:bg-shield-50 transition-colors",title:"View details",children:e.jsx(I,{className:"w-4 h-4"})}),e.jsx("button",{onClick:()=>S(t.id,s),className:"p-1.5 rounded-md text-slate-500 hover:text-amber-600 hover:bg-amber-50 transition-colors",title:"Clone",children:e.jsx(O,{className:"w-4 h-4"})}),e.jsx("button",{onClick:()=>k(t),className:"p-1.5 rounded-md text-slate-500 hover:text-blue-600 hover:bg-blue-50 transition-colors",title:t.is_active?"Deactivate":"Activate",children:e.jsx(Y,{className:"w-4 h-4"})}),e.jsx("button",{onClick:()=>R(t.id,s),className:"p-1.5 rounded-md text-slate-500 hover:text-red-600 hover:bg-red-50 transition-colors",title:"Delete",children:e.jsx(B,{className:"w-4 h-4"})})]})})]},t.id)})})]}),e.jsx("div",{className:"px-4 py-3 border-t border-slate-100 bg-slate-50",children:e.jsxs("p",{className:"text-xs text-slate-500",children:["Showing ",h.length," of ",a.total," rate table",a.total!==1?"s":""]})})]})})]})}export{H as default};
