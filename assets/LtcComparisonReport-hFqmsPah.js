import{j as e}from"./vendor-query-D5ml2kdZ.js";import{f as v,r as x}from"./vendor-react-C8VcOkCS.js";import{b as w,C as d,B as b}from"./index-8sQqf4Gi.js";import{L as k,a6 as C,ba as P,Y as B,S as D}from"./vendor-ui-tJ0aMxU9.js";const o=r=>r!=null?`$${Number(r).toLocaleString(void 0,{minimumFractionDigits:2,maximumFractionDigits:2})}`:"-",i=r=>r?r.replace(/_/g," ").replace(/pct/g,"%").replace(/(\d)yr/,"$1 Year").replace("compound","Compound"):"-",m=r=>r?"Yes":"No";function I(){const[r]=v(),[a,g]=x.useState(null),[y,p]=x.useState(!0),[u,f]=x.useState("");x.useEffect(()=>{j()},[]);const j=async()=>{const t=r.get("runs");if(!t){f("No rating runs specified. Add ?runs=1,2,3 to the URL."),p(!1);return}const s=t.split(",").map(Number).filter(l=>!isNaN(l));if(s.length===0){f("Invalid run IDs."),p(!1);return}try{p(!0);const l=await w.post("/reports/ltc-comparison",{rating_run_ids:s,client_name:r.get("client")||void 0,client_state:r.get("state")||void 0});g(l)}catch(l){f(l instanceof Error?l.message:"Failed to generate comparison")}finally{p(!1)}};if(y)return e.jsxs("div",{className:"space-y-6",children:[e.jsx("h1",{className:"text-2xl font-bold text-slate-900",children:"LTC Carrier Comparison"}),e.jsxs(d,{className:"p-12 text-center",children:[e.jsx(k,{className:"w-8 h-8 animate-spin text-shield-500 mx-auto"}),e.jsx("p",{className:"text-slate-500 mt-2",children:"Generating comparison report..."})]})]});if(u||!a)return e.jsxs("div",{className:"space-y-6",children:[e.jsx("h1",{className:"text-2xl font-bold text-slate-900",children:"LTC Carrier Comparison"}),e.jsxs(d,{className:"p-8 text-center",children:[e.jsx(C,{className:"w-10 h-10 text-red-400 mx-auto mb-3"}),e.jsx("p",{className:"text-red-500",children:u||"No data available"}),e.jsx(b,{variant:"outline",size:"sm",className:"mt-3",onClick:j,children:"Retry"})]})]});const{carriers:c,agency:n}=a,N=[{label:"Carrier",key:"carrier_name",format:t=>t.carrier_name},{label:"Product",key:"product_name",format:t=>t.product_name},{label:"Issue Age",key:"issue_age",format:t=>String(t.issue_age||"-")},{label:"Gender",key:"sex",format:t=>t.sex==="M"?"Male":t.sex==="F"?"Female":"-"},{label:"UW Class",key:"uw_class",format:t=>i(t.uw_class)},{label:"Tax Qualified",key:"tax_qualified",format:t=>m(t.tax_qualified)},{label:"Facility Daily Benefit",key:"facility_daily_benefit",format:t=>o(t.facility_daily_benefit)},{label:"Benefit Period",key:"benefit_period",format:t=>i(t.benefit_period)},{label:"Pool of Money",key:"pool_of_money",format:t=>o(t.pool_of_money)},{label:"Home Care Benefit",key:"home_care_daily_benefit",format:t=>i(t.home_care_daily_benefit)},{label:"Home Care Type",key:"home_care_type",format:t=>i(t.home_care_type)},{label:"Home Care Benefit Period",key:"home_care_benefit_period",format:t=>i(t.home_care_benefit_period)},{label:"Cash Benefit",key:"cash_benefit",format:t=>t.cash_benefit?"25%":"N/A"},{label:"Inflation Protection",key:"inflation_protection",format:t=>i(t.inflation_protection)},{label:"Inflation Duration",key:"inflation_duration",format:t=>i(t.inflation_duration)},{label:"Elimination Period",key:"elimination_period",format:t=>`${t.elimination_period} days`},{label:"Nonforfeiture",key:"nonforfeiture",format:t=>i(t.nonforfeiture)},{label:"Restoration of Benefit",key:"restoration",format:t=>m(t.restoration)},{label:"Spouse Premium Waiver",key:"spouse_waiver",format:t=>m(t.spouse_waiver)},{label:"Marital Discount",key:"marital_discount",format:t=>i(t.marital_discount)},{label:"Payment Option",key:"payment_option",format:t=>i(t.payment_option)},{label:"Partnership Plan",key:"partnership_plan",format:t=>m(t.partnership_plan)},{label:"Assisted Living",key:"assisted_living",format:t=>i(t.assisted_living)},{label:"Waiver of Premium",key:"waiver_of_premium",format:t=>i(t.waiver_of_premium)},{label:"Joint Applicant",key:"joint_applicant",format:t=>m(t.joint_applicant)}],_=[{label:"Monthly Benefit at Age 80",format:t=>o(t.monthly_benefit_age_80)},{label:"Daily Benefit at Age 80",format:t=>o(t.daily_benefit_age_80)},{label:"Total Benefit at Age 80",format:t=>o(t.total_benefit_age_80)}];return e.jsxs(e.Fragment,{children:[e.jsx("style",{children:`
        @media print {
          /* Hide sidebar, top bar, and nav */
          aside, header, nav, .lg\\:ml-64 > div:first-child { display: none !important; }
          .lg\\:ml-64 { margin-left: 0 !important; }
          main { padding: 0 !important; }
          main > div { padding: 0 !important; }

          /* Page setup */
          @page {
            size: landscape;
            margin: 0.5in 0.4in 0.75in 0.4in;
          }

          /* Ensure colors print */
          * { -webkit-print-color-adjust: exact !important; print-color-adjust: exact !important; }

          /* Table fits page */
          table { font-size: 9pt !important; }
          td, th { padding: 4px 6px !important; }
        }
      `}),e.jsxs("div",{className:"space-y-6 print:space-y-3",children:[e.jsxs("div",{className:"flex items-center justify-between print:hidden",children:[e.jsxs("div",{children:[e.jsx("h1",{className:"text-2xl font-bold text-slate-900",children:"Long Term Care — Carrier Comparison"}),e.jsx("p",{className:"text-slate-500 mt-1",children:"Side-by-side carrier analysis"})]}),e.jsxs("div",{className:"flex gap-2",children:[e.jsx(b,{variant:"outline",size:"sm",leftIcon:e.jsx(P,{className:"w-4 h-4"}),onClick:()=>window.print(),children:"Print"}),e.jsx(b,{variant:"outline",size:"sm",leftIcon:e.jsx(B,{className:"w-4 h-4"}),onClick:()=>window.print(),children:"Export PDF"})]})]}),e.jsx("div",{className:"hidden print:block",children:e.jsxs("div",{className:"flex items-start justify-between border-b-2 border-slate-800 pb-3 mb-4",children:[e.jsx("div",{children:n?e.jsxs(e.Fragment,{children:[e.jsx("h1",{className:"text-xl font-bold text-slate-900",children:n.name}),n.address&&e.jsx("p",{className:"text-xs text-slate-600",children:n.address}),e.jsxs("div",{className:"flex gap-4 mt-1",children:[n.phone&&e.jsx("p",{className:"text-xs text-slate-600",children:n.phone}),n.email&&e.jsx("p",{className:"text-xs text-slate-600",children:n.email}),n.website&&e.jsx("p",{className:"text-xs text-slate-600",children:n.website})]})]}):e.jsx("h1",{className:"text-xl font-bold text-slate-900",children:"Long Term Care Comparison"})}),e.jsxs("div",{className:"text-right",children:[e.jsx("h2",{className:"text-lg font-bold text-slate-800",children:"LTC Carrier Comparison"}),e.jsxs("p",{className:"text-xs text-slate-500",children:["Report Date: ",a.date]})]})]})}),e.jsx(d,{className:"print:shadow-none print:border print:rounded-none",children:e.jsxs("div",{className:"p-6 print:p-3 grid grid-cols-2 gap-4",children:[e.jsxs("div",{children:[e.jsx("p",{className:"text-xs text-slate-500 uppercase tracking-wider",children:"Client"}),e.jsx("p",{className:"font-semibold text-slate-900",children:a.client.name}),a.client.state&&e.jsxs("p",{className:"text-sm text-slate-600",children:["State: ",a.client.state]}),a.client.dob&&e.jsxs("p",{className:"text-sm text-slate-600",children:["DOB: ",a.client.dob]})]}),e.jsxs("div",{className:"text-right",children:[e.jsx("p",{className:"text-xs text-slate-500 uppercase tracking-wider",children:"Prepared By"}),e.jsx("p",{className:"font-semibold text-slate-900",children:a.prepared_by.name}),e.jsx("p",{className:"text-sm text-slate-600",children:a.prepared_by.email}),e.jsx("p",{className:"text-sm text-slate-600 print:hidden",children:a.date})]})]})}),e.jsx(d,{className:"print:shadow-none print:border print:rounded-none",children:e.jsx("div",{className:"overflow-x-auto",children:e.jsxs("table",{className:"w-full text-sm",children:[e.jsx("thead",{children:e.jsxs("tr",{className:"border-b-2 border-shield-200 bg-shield-50",children:[e.jsx("th",{className:"text-left p-3 font-semibold text-shield-700 w-56 print:w-44",children:"Parameter"}),c.map((t,s)=>e.jsx("th",{className:"text-center p-3 font-semibold text-shield-700 min-w-[180px] print:min-w-0",children:e.jsxs("div",{className:"flex items-center justify-center gap-2",children:[e.jsx(D,{className:"w-4 h-4 print:hidden"}),t.carrier_name]})},s))]})}),e.jsxs("tbody",{children:[N.map((t,s)=>e.jsxs("tr",{className:s%2===0?"bg-white":"bg-slate-50",children:[e.jsx("td",{className:"p-3 font-medium text-slate-700",children:t.label}),c.map((l,h)=>e.jsx("td",{className:"p-3 text-center text-slate-900",children:t.format(l)},h))]},t.key)),e.jsx("tr",{className:"border-t-2 border-shield-200 bg-shield-50",children:e.jsx("td",{colSpan:c.length+1,className:"p-3 font-semibold text-shield-700",children:"Benefit Projections"})}),_.map((t,s)=>e.jsxs("tr",{className:s%2===0?"bg-white":"bg-slate-50",children:[e.jsx("td",{className:"p-3 font-medium text-slate-700",children:t.label}),c.map((l,h)=>e.jsx("td",{className:"p-3 text-center text-slate-900",children:t.format(l)},h))]},`proj-${s}`)),e.jsx("tr",{className:"border-t-2 border-savings-200 bg-savings-50",children:e.jsx("td",{colSpan:c.length+1,className:"p-3 font-semibold text-savings-700",children:"Premium"})}),e.jsxs("tr",{className:"bg-white",children:[e.jsx("td",{className:"p-3 font-semibold text-slate-900",children:"Annual Premium"}),c.map((t,s)=>e.jsx("td",{className:"p-3 text-center font-bold text-lg text-savings-700",children:o(t.premium)},s))]})]})]})})}),Object.keys(a.combined_premiums).length>0&&e.jsx(d,{className:"print:shadow-none print:border print:rounded-none",children:e.jsxs("div",{className:"p-6 print:p-3",children:[e.jsx("h3",{className:"font-semibold text-slate-900 mb-3",children:"Combined Annual Premiums"}),e.jsx("div",{className:"grid grid-cols-3 gap-4 print:gap-2",children:Object.entries(a.combined_premiums).map(([t,s])=>e.jsxs("div",{className:"text-center p-4 print:p-2 rounded-xl bg-slate-50",children:[e.jsx("p",{className:"text-sm text-slate-500 capitalize",children:t.replace(/_/g," ")}),e.jsx("p",{className:"text-2xl print:text-lg font-bold text-savings-600",children:o(s)})]},t))})]})}),e.jsxs("div",{className:"hidden print:block mt-6 pt-4 border-t border-slate-300",children:[e.jsx("div",{className:"mb-4",children:e.jsxs("p",{className:"text-[8pt] leading-tight text-slate-500",children:[e.jsx("span",{className:"font-semibold text-slate-600",children:"Disclaimer:"})," This comparison report is provided for informational and illustrative purposes only. Premium rates shown are estimates based on the information provided and may differ from final carrier quotes. Actual premiums are subject to underwriting approval and may vary based on health status, medical history, and other factors determined by the issuing carrier. Benefits, features, and availability may vary by state. This report does not constitute an offer of insurance, a guarantee of coverage, or financial advice. Please consult with a licensed insurance professional and review the actual policy contract for complete terms, conditions, limitations, and exclusions before making any purchase decision."]})}),e.jsxs("div",{className:"flex items-center justify-between text-[8pt] text-slate-400",children:[e.jsxs("div",{children:[e.jsxs("p",{children:["Powered by ",e.jsx("span",{className:"font-semibold",children:"Insurons"})," — Insurance Technology Platform"]}),e.jsx("p",{children:"www.insurons.com"})]}),e.jsxs("div",{className:"text-right",children:[e.jsxs("p",{children:["Report generated: ",a.date]}),e.jsxs("p",{children:["Confidential — Prepared for ",a.client.name]})]})]})]}),e.jsx("div",{className:"print:hidden",children:e.jsx("div",{className:"p-4 rounded-lg bg-slate-50 border border-slate-200",children:e.jsxs("p",{className:"text-xs text-slate-500 leading-relaxed",children:[e.jsx("span",{className:"font-semibold text-slate-600",children:"Disclaimer:"})," This comparison is for informational purposes only. Premium rates are estimates and may differ from final carrier quotes. Actual premiums are subject to underwriting approval. Benefits and availability may vary by state. This does not constitute an offer of insurance or financial advice. Please review actual policy contracts for complete terms and conditions."]})})})]})]})}export{I as default};
