import{j as e}from"./vendor-query-D5ml2kdZ.js";import{r as d}from"./vendor-react-C8VcOkCS.js";import{k as v,x as P,an as b,b1 as w,as as q,a2 as B,ad as g}from"./vendor-ui-tJ0aMxU9.js";import{b as i,C as n,B as x}from"./index-CyWO3JYX.js";import{B as z}from"./Badge-DV1ZXp4T.js";function y(t){if(!t)return"";const r=Object.entries(t).filter(([,l])=>l!==void 0);return r.length?"?"+new URLSearchParams(r.map(([l,o])=>[l,String(o)])).toString():""}const c={listModules:t=>i.get(`/training/modules${y(t)}`),getModule:t=>i.get(`/training/modules/${t}`),createModule:t=>i.post("/training/modules",t),updateModule:(t,r)=>i.put(`/training/modules/${t}`,r),deleteModule:t=>i.delete(`/training/modules/${t}`),getCatalog:t=>i.get(`/training/catalog${y(t)}`),startModule:t=>i.post(`/training/modules/${t}/start`),completeModule:(t,r)=>i.post(`/training/modules/${t}/complete`,r),getProgress:()=>i.get("/training/progress"),getCategories:()=>i.get("/training/categories")};function F(){const[t,r]=d.useState([]),[l,o]=d.useState(null),[C,p]=d.useState(!0),[m,j]=d.useState("all"),[_,M]=d.useState([]);d.useEffect(()=>{(async()=>{p(!0);try{const[a,h,$]=await Promise.all([c.getCatalog(m!=="all"?{category:m}:void 0),c.getProgress(),c.getCategories()]);r(a),o(h),M($)}catch{g.error("Failed to load training catalog")}finally{p(!1)}})()},[m]);const N=s=>l?.completions.some(a=>a.module_id===s&&a.completed_at)??!1,f=s=>l?.completions.some(a=>a.module_id===s&&!a.completed_at)??!1,u=async s=>{!f(s.id)&&!N(s.id)&&await c.startModule(s.id);const a=await c.getProgress();o(a)},k=async s=>{try{await c.completeModule(s,{score:100}),g.success("Training module completed!");const a=await c.getProgress();o(a)}catch{g.error("Failed to complete training module")}},S={video:"ðŸŽ¬",article:"ðŸ“„",quiz:"â“",interactive:"ðŸ–±ï¸"};return e.jsxs("div",{className:"space-y-6",children:[e.jsx("div",{className:"flex items-center justify-between",children:e.jsxs("div",{children:[e.jsx("h1",{className:"text-2xl font-bold text-slate-900",children:"Training Center"}),e.jsx("p",{className:"text-slate-500 mt-1",children:"Build your skills with courses and certifications"})]})}),l&&e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-4 gap-4",children:[e.jsx(n,{className:"p-4",children:e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx("div",{className:"w-10 h-10 rounded-xl bg-shield-50 flex items-center justify-center",children:e.jsx(v,{className:"w-5 h-5 text-shield-600"})}),e.jsxs("div",{children:[e.jsx("p",{className:"text-xs text-slate-500",children:"Completed"}),e.jsxs("p",{className:"text-xl font-bold text-slate-900",children:[l.completed_modules,"/",l.total_modules]})]})]})}),e.jsx(n,{className:"p-4",children:e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx("div",{className:"w-10 h-10 rounded-xl bg-amber-50 flex items-center justify-center",children:e.jsx(P,{className:"w-5 h-5 text-amber-600"})}),e.jsxs("div",{children:[e.jsx("p",{className:"text-xs text-slate-500",children:"Avg Score"}),e.jsx("p",{className:"text-xl font-bold text-slate-900",children:l.avg_score?`${l.avg_score}%`:"N/A"})]})]})}),e.jsx(n,{className:"p-4",children:e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx("div",{className:"w-10 h-10 rounded-xl bg-red-50 flex items-center justify-center",children:e.jsx(b,{className:"w-5 h-5 text-red-600"})}),e.jsxs("div",{children:[e.jsx("p",{className:"text-xs text-slate-500",children:"Required Left"}),e.jsx("p",{className:"text-xl font-bold text-slate-900",children:l.required_remaining})]})]})}),e.jsx(n,{className:"p-4",children:e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx("div",{className:"w-10 h-10 rounded-xl bg-green-50 flex items-center justify-center",children:e.jsx(w,{className:"w-5 h-5 text-green-600"})}),e.jsxs("div",{children:[e.jsx("p",{className:"text-xs text-slate-500",children:"Time Spent"}),e.jsxs("p",{className:"text-xl font-bold text-slate-900",children:[Math.round(l.total_time_spent_minutes/60),"h"]})]})]})})]}),l&&l.total_modules>0&&e.jsxs(n,{className:"p-4",children:[e.jsxs("div",{className:"flex items-center justify-between mb-2",children:[e.jsx("span",{className:"text-sm font-medium text-slate-700",children:"Overall Progress"}),e.jsxs("span",{className:"text-sm text-slate-500",children:[Math.round(l.completed_modules/l.total_modules*100),"%"]})]}),e.jsx("div",{className:"w-full bg-slate-100 rounded-full h-3",children:e.jsx("div",{className:"bg-shield-500 rounded-full h-3 transition-all",style:{width:`${l.completed_modules/l.total_modules*100}%`}})})]}),e.jsxs("div",{className:"flex items-center gap-2 overflow-x-auto pb-1",children:[e.jsx(q,{className:"w-4 h-4 text-slate-400 flex-shrink-0"}),e.jsx("button",{onClick:()=>j("all"),className:`text-sm px-3 py-1.5 rounded-full whitespace-nowrap transition-colors ${m==="all"?"bg-shield-50 text-shield-700 font-medium":"text-slate-500 hover:bg-slate-100"}`,children:"All"}),_.map(s=>e.jsx("button",{onClick:()=>j(s),className:`text-sm px-3 py-1.5 rounded-full whitespace-nowrap transition-colors ${m===s?"bg-shield-50 text-shield-700 font-medium":"text-slate-500 hover:bg-slate-100"}`,children:s},s))]}),C?e.jsx(n,{className:"p-8 text-center",children:e.jsx("div",{className:"w-8 h-8 border-4 border-shield-200 border-t-shield-600 rounded-full animate-spin mx-auto"})}):e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-4",children:[t.map(s=>{const a=N(s.id),h=f(s.id);return e.jsxs(n,{className:`p-5 transition-all hover:shadow-md ${a?"border-green-200 bg-green-50/30":""}`,children:[e.jsxs("div",{className:"flex items-start justify-between mb-3",children:[e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("span",{className:"text-lg",children:S[s.content_type]||"ðŸ“š"}),e.jsx(z,{variant:s.is_required?"danger":"default",children:s.is_required?"Required":"Optional"})]}),a&&e.jsx(B,{className:"w-5 h-5 text-green-500"})]}),e.jsx("h3",{className:"font-bold text-slate-900 mb-1",children:s.title}),e.jsx("p",{className:"text-sm text-slate-500 line-clamp-2 mb-3",children:s.description}),e.jsxs("div",{className:"flex items-center gap-3 text-xs text-slate-400 mb-4",children:[e.jsxs("span",{className:"flex items-center gap-1",children:[e.jsx(b,{className:"w-3 h-3"})," ",s.duration_minutes,"min"]}),e.jsx("span",{className:"capitalize",children:s.content_type}),e.jsx("span",{children:s.category})]}),a?e.jsx(x,{variant:"outline",size:"sm",className:"w-full",onClick:()=>u(s),children:"Review Again"}):h?e.jsxs("div",{className:"space-y-2",children:[e.jsx(x,{variant:"shield",size:"sm",className:"w-full",onClick:()=>u(s),children:"Continue"}),e.jsx(x,{variant:"ghost",size:"sm",className:"w-full",onClick:()=>k(s.id),children:"Mark Complete"})]}):e.jsxs(x,{variant:"shield",size:"sm",className:"w-full",onClick:()=>u(s),children:[e.jsx(w,{className:"w-3.5 h-3.5 mr-1"})," Start"]})]},s.id)}),t.length===0&&e.jsxs(n,{className:"p-12 text-center col-span-3",children:[e.jsx(v,{className:"w-12 h-12 text-slate-300 mx-auto mb-3"}),e.jsx("p",{className:"text-slate-500",children:"No training modules available"})]})]})]})}export{F as default};
