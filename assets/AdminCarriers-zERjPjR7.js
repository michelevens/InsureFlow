import{j as e}from"./vendor-query-D5ml2kdZ.js";import{r as a}from"./vendor-react-C8VcOkCS.js";import{B as r,C as l,I as o}from"./index-CyWO3JYX.js";import{B as h}from"./Badge-DV1ZXp4T.js";import{a as p}from"./admin-BHVqi3KQ.js";import{ad as d,A as F,aV as f,aO as A,ai as P,ae as T,L as V,X as q}from"./vendor-ui-tJ0aMxU9.js";function X(){const[x,E]=a.useState([]),[I,v]=a.useState(!0),[j,B]=a.useState(""),[u,b]=a.useState(null),[M,w]=a.useState(!1),[L,m]=a.useState(!1),[t,i]=a.useState({name:"",slug:"",description:"",website:"",am_best_rating:"",is_active:!0}),[C,y]=a.useState(!1),[n,_]=a.useState(null);a.useEffect(()=>{g()},[]);const g=async()=>{v(!0);try{const s=await p.getCarriers(j?{search:j}:void 0);E(s)}catch{d.error("Failed to load carriers")}finally{v(!1)}};a.useEffect(()=>{const s=setTimeout(()=>{g()},400);return()=>clearTimeout(s)},[j]);const S=async s=>{w(!0);try{const c=await p.getCarrier(s);b(c)}catch{d.error("Failed to load carrier details")}finally{w(!1)}},N=s=>{s?(_(s.id),i({name:s.name,slug:s.slug,description:s.description||"",website:s.website||"",am_best_rating:s.am_best_rating||"",is_active:s.is_active})):(_(null),i({name:"",slug:"",description:"",website:"",am_best_rating:"",is_active:!0})),m(!0)},z=async()=>{if(!t.name.trim()){d.error("Name is required");return}y(!0);try{n?(await p.updateCarrier(n,t),d.success("Carrier updated"),u&&u.id===n&&S(n)):(await p.createCarrier(t),d.success("Carrier created")),m(!1),g()}catch{d.error("Failed to save carrier")}finally{y(!1)}},k=x.filter(s=>s.is_active).length;if(u){const s=u;return e.jsxs("div",{className:"space-y-6",children:[e.jsxs(r,{variant:"ghost",size:"sm",onClick:()=>b(null),children:[e.jsx(F,{className:"h-4 w-4 mr-1"})," Back to Carriers"]}),e.jsxs(l,{className:"p-6",children:[e.jsxs("div",{className:"flex items-start justify-between",children:[e.jsxs("div",{className:"flex items-center gap-4",children:[e.jsx("div",{className:"h-14 w-14 rounded-xl bg-shield-100 flex items-center justify-center",children:e.jsx(f,{className:"h-7 w-7 text-shield-600"})}),e.jsxs("div",{children:[e.jsx("h1",{className:"text-2xl font-bold text-slate-900",children:s.name}),e.jsx("p",{className:"text-sm text-slate-500",children:s.slug})]})]}),e.jsxs("div",{className:"flex items-center gap-2",children:[s.am_best_rating&&e.jsx(h,{variant:"shield",children:s.am_best_rating}),e.jsx(h,{variant:s.is_active?"success":"danger",children:s.is_active?"Active":"Inactive"}),e.jsx(r,{variant:"outline",size:"sm",leftIcon:e.jsx(A,{className:"w-4 h-4"}),onClick:()=>N(s),children:"Edit"})]})]}),s.description&&e.jsx("p",{className:"text-slate-600 mt-4",children:s.description}),s.website&&e.jsxs("div",{className:"flex items-center gap-2 mt-3 text-sm",children:[e.jsx(P,{className:"h-4 w-4 text-shield-500"}),e.jsx("a",{href:s.website,target:"_blank",rel:"noopener noreferrer",className:"text-shield-600 hover:underline",children:s.website})]})]}),e.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[e.jsxs(l,{className:"p-4 text-center",children:[e.jsx("p",{className:"text-xl font-bold text-slate-900",children:s.products?.length??0}),e.jsx("p",{className:"text-sm text-slate-500",children:"Products"})]}),e.jsxs(l,{className:"p-4 text-center",children:[e.jsx("p",{className:"text-xl font-bold text-slate-900",children:s.agency_appointments_count??0}),e.jsx("p",{className:"text-sm text-slate-500",children:"Agency Appointments"})]})]}),s.products&&s.products.length>0&&e.jsxs(l,{className:"p-6",children:[e.jsx("h2",{className:"text-lg font-semibold text-slate-900 mb-4",children:"Products"}),e.jsx("div",{className:"space-y-2",children:s.products.map(c=>e.jsxs("div",{className:"flex items-center justify-between py-2 border-b border-slate-50 last:border-0",children:[e.jsxs("div",{children:[e.jsx("p",{className:"font-medium text-slate-900",children:c.name}),e.jsx("p",{className:"text-xs text-slate-500",children:c.insurance_type})]}),e.jsx(h,{variant:c.is_active?"success":"default",children:c.is_active?"Active":"Inactive"})]},c.id))})]})]})}return e.jsxs("div",{className:"space-y-6",children:[e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsx("h1",{className:"text-2xl font-bold text-slate-900",children:"Carrier Management"}),e.jsx("p",{className:"text-slate-500 mt-1",children:"Manage insurance carriers on the platform"})]}),e.jsx(r,{variant:"shield",leftIcon:e.jsx(f,{className:"w-4 h-4"}),onClick:()=>N(),children:"Add Carrier"})]}),e.jsxs("div",{className:"grid grid-cols-3 gap-4",children:[e.jsxs(l,{className:"p-4 text-center",children:[e.jsx("p",{className:"text-xl font-bold text-slate-900",children:x.length}),e.jsx("p",{className:"text-sm text-slate-500",children:"Total Carriers"})]}),e.jsxs(l,{className:"p-4 text-center",children:[e.jsx("p",{className:"text-xl font-bold text-savings-600",children:k}),e.jsx("p",{className:"text-sm text-slate-500",children:"Active"})]}),e.jsxs(l,{className:"p-4 text-center",children:[e.jsx("p",{className:"text-xl font-bold text-slate-900",children:x.length-k}),e.jsx("p",{className:"text-sm text-slate-500",children:"Inactive"})]})]}),e.jsx(o,{placeholder:"Search carriers...",value:j,onChange:s=>B(s.target.value),leftIcon:e.jsx(T,{className:"w-5 h-5"})}),e.jsx(l,{children:I||M?e.jsx("div",{className:"flex items-center justify-center py-20",children:e.jsx(V,{className:"h-8 w-8 animate-spin text-shield-500"})}):x.length===0?e.jsxs("div",{className:"flex flex-col items-center justify-center py-20 text-slate-500",children:[e.jsx(f,{className:"h-10 w-10 mb-3 text-slate-300"}),e.jsx("p",{className:"font-medium",children:"No carriers found"})]}):e.jsx("div",{className:"overflow-x-auto",children:e.jsxs("table",{className:"w-full",children:[e.jsx("thead",{children:e.jsxs("tr",{className:"border-b border-slate-100",children:[e.jsx("th",{className:"text-left text-xs font-medium text-slate-500 uppercase tracking-wider p-4",children:"Carrier"}),e.jsx("th",{className:"text-left text-xs font-medium text-slate-500 uppercase tracking-wider p-4",children:"AM Best"}),e.jsx("th",{className:"text-left text-xs font-medium text-slate-500 uppercase tracking-wider p-4",children:"Status"}),e.jsx("th",{className:"text-right text-xs font-medium text-slate-500 uppercase tracking-wider p-4",children:"Actions"})]})}),e.jsx("tbody",{className:"divide-y divide-slate-50",children:x.map(s=>e.jsxs("tr",{className:"hover:bg-slate-50",children:[e.jsx("td",{className:"p-4",children:e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx("div",{className:"w-9 h-9 rounded-xl bg-shield-100 text-shield-700 flex items-center justify-center",children:e.jsx(f,{className:"w-5 h-5"})}),e.jsxs("div",{children:[e.jsx("span",{className:"font-medium text-slate-900",children:s.name}),e.jsx("p",{className:"text-xs text-slate-400",children:s.slug})]})]})}),e.jsx("td",{className:"p-4",children:s.am_best_rating?e.jsx(h,{variant:"shield",children:s.am_best_rating}):e.jsx("span",{className:"text-sm text-slate-400",children:"â€”"})}),e.jsx("td",{className:"p-4",children:e.jsx(h,{variant:s.is_active?"success":"danger",children:s.is_active?"Active":"Inactive"})}),e.jsx("td",{className:"p-4 text-right",children:e.jsxs("div",{className:"flex items-center justify-end gap-1",children:[e.jsx(r,{variant:"outline",size:"sm",onClick:()=>S(s.id),children:"View"}),e.jsx(r,{variant:"ghost",size:"sm",onClick:()=>N(s),children:e.jsx(A,{className:"w-4 h-4"})})]})})]},s.id))})]})})}),L&&e.jsx("div",{className:"fixed inset-0 z-50 flex items-center justify-center bg-black/50",onClick:()=>m(!1),children:e.jsxs(l,{className:"w-full max-w-md p-6",onClick:s=>s.stopPropagation(),children:[e.jsxs("div",{className:"flex items-center justify-between mb-4",children:[e.jsx("h3",{className:"text-lg font-semibold text-slate-900",children:n?"Edit Carrier":"Add Carrier"}),e.jsx("button",{onClick:()=>m(!1),children:e.jsx(q,{className:"w-5 h-5 text-slate-400"})})]}),e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{className:"space-y-1",children:[e.jsx("label",{className:"text-sm font-medium text-slate-700",children:"Name"}),e.jsx(o,{value:t.name,onChange:s=>i({...t,name:s.target.value})})]}),e.jsxs("div",{className:"space-y-1",children:[e.jsx("label",{className:"text-sm font-medium text-slate-700",children:"Slug"}),e.jsx(o,{value:t.slug,onChange:s=>i({...t,slug:s.target.value})})]}),e.jsxs("div",{className:"space-y-1",children:[e.jsx("label",{className:"text-sm font-medium text-slate-700",children:"Description"}),e.jsx("textarea",{value:t.description,onChange:s=>i({...t,description:s.target.value}),className:"w-full px-3 py-2 border border-slate-300 rounded-lg text-sm focus:outline-none focus:ring-2 focus:ring-shield-500 min-h-[60px]"})]}),e.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[e.jsxs("div",{className:"space-y-1",children:[e.jsx("label",{className:"text-sm font-medium text-slate-700",children:"Website"}),e.jsx(o,{value:t.website,onChange:s=>i({...t,website:s.target.value}),placeholder:"https://"})]}),e.jsxs("div",{className:"space-y-1",children:[e.jsx("label",{className:"text-sm font-medium text-slate-700",children:"AM Best Rating"}),e.jsx(o,{value:t.am_best_rating,onChange:s=>i({...t,am_best_rating:s.target.value}),placeholder:"A+"})]})]}),e.jsxs("label",{className:"flex items-center gap-3",children:[e.jsx("input",{type:"checkbox",checked:t.is_active,onChange:s=>i({...t,is_active:s.target.checked}),className:"w-4 h-4 rounded border-slate-300 text-shield-600 focus:ring-shield-500"}),e.jsx("span",{className:"text-sm text-slate-700",children:"Active"})]})]}),e.jsxs("div",{className:"flex justify-end gap-2 mt-6",children:[e.jsx(r,{variant:"outline",onClick:()=>m(!1),children:"Cancel"}),e.jsx(r,{onClick:z,disabled:C,children:C?"Saving...":n?"Update":"Create"})]})]})})]})}export{X as default};
