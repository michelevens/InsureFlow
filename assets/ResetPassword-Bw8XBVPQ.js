import{j as e}from"./vendor-query-D5ml2kdZ.js";import{f as y,u as P,r as a,L as u}from"./vendor-react-C8VcOkCS.js";import{B as x,I as h,a as S}from"./index-BZEM9EbM.js";import{a2 as k,_ as p,A as C}from"./vendor-ui-tJ0aMxU9.js";function B(){const[n]=y(),w=P(),o=n.get("token")||"",c=n.get("email")||"",[t,f]=a.useState(""),[l,g]=a.useState(""),[j,i]=a.useState(!1),[N,b]=a.useState(!1),[d,r]=a.useState(""),v=async s=>{if(s.preventDefault(),r(""),t!==l){r("Passwords do not match");return}if(t.length<8){r("Password must be at least 8 characters");return}i(!0);try{await S.resetPassword({token:o,email:c,password:t,password_confirmation:l}),b(!0)}catch(m){r(m instanceof Error?m.message:"Failed to reset password")}finally{i(!1)}};return!o||!c?e.jsx("div",{className:"min-h-screen bg-slate-50 flex items-center justify-center px-4 py-12",children:e.jsxs("div",{className:"w-full max-w-md text-center",children:[e.jsx("img",{src:"/logo.png",alt:"Insurons",className:"h-20 w-auto mx-auto mb-4"}),e.jsxs("div",{className:"bg-white rounded-2xl border border-slate-200 p-8",children:[e.jsx("p",{className:"text-slate-700 mb-4",children:"Invalid or missing reset link."}),e.jsx(u,{to:"/forgot-password",className:"text-shield-600 font-medium hover:underline",children:"Request a new reset link"})]})]})}):e.jsx("div",{className:"min-h-screen bg-slate-50 flex items-center justify-center px-4 py-12",children:e.jsxs("div",{className:"w-full max-w-md",children:[e.jsxs("div",{className:"text-center mb-8",children:[e.jsx("img",{src:"/logo.png",alt:"Insurons",className:"h-20 w-auto mx-auto mb-4"}),e.jsx("h1",{className:"text-2xl font-bold text-slate-900",children:"Set new password"}),e.jsx("p",{className:"text-slate-500 mt-1",children:"Enter your new password below"})]}),e.jsx("div",{className:"bg-white rounded-2xl border border-slate-200 p-8",children:N?e.jsxs("div",{className:"text-center space-y-4",children:[e.jsx(k,{className:"w-12 h-12 text-green-500 mx-auto"}),e.jsx("p",{className:"text-slate-700",children:"Your password has been reset successfully."}),e.jsx(x,{variant:"shield",onClick:()=>w("/login"),className:"mt-2",children:"Go to Login"})]}):e.jsxs("form",{onSubmit:v,className:"space-y-5",children:[d&&e.jsx("div",{className:"p-3 rounded-xl bg-red-50 text-red-600 text-sm",children:d}),e.jsx(h,{label:"New Password",type:"password",placeholder:"At least 8 characters",value:t,onChange:s=>f(s.target.value),leftIcon:e.jsx(p,{className:"w-5 h-5"}),required:!0}),e.jsx(h,{label:"Confirm Password",type:"password",placeholder:"Repeat your new password",value:l,onChange:s=>g(s.target.value),leftIcon:e.jsx(p,{className:"w-5 h-5"}),required:!0}),e.jsx(x,{type:"submit",variant:"shield",size:"lg",className:"w-full",isLoading:j,children:"Reset Password"})]})}),e.jsx("p",{className:"text-center mt-6",children:e.jsxs(u,{to:"/login",className:"text-sm text-shield-600 font-medium hover:underline inline-flex items-center gap-1",children:[e.jsx(C,{className:"w-4 h-4"})," Back to login"]})})]})})}export{B as default};
